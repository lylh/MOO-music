var __defProp=Object.defineProperty,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__publicField=(e,t,n)=>(__defNormalProp(e,"symbol"!=typeof t?t+"":t,n),n);if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then(n=>t.resolve(e()).then(()=>n),n=>t.resolve(e()).then(()=>{throw n}))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e,t){"use strict";function n(e,t,...n){uni.__log__&&uni.__log__(e,t,...n)}function o(e,n){return t.isString(e)?n:e}const l=t=>(n,o=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,n,o)},a=l("onShow"),i=l("onHide"),r=l("onLaunch"),s=l("onLoad"),c=l("onReachBottom"),u={id:"2852637",name:"uniui图标库",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]},d=(e,t)=>{const n=e.__vccOpts||e;for(const[o,l]of t)n[o]=l;return n};const m=d({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data:()=>({icons:u.glyphs}),computed:{unicode(){let e=this.icons.find(e=>e.font_class===this.type);return e?unescape(`%u${e.unicode}`):""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e}},methods:{_onClick(){this.$emit("click")}}},[["render",function(t,n,o,l,a,i){return e.openBlock(),e.createElementBlock("text",{style:e.normalizeStyle({color:o.color,"font-size":i.iconSize}),class:e.normalizeClass(["uni-icons",["uniui-"+o.type,o.customPrefix,o.customPrefix?o.type:""]]),onClick:n[0]||(n[0]=(...e)=>i._onClick&&i._onClick(...e))},null,6)}],["__scopeId","data-v-d73913cc"]]);const p=e=>"number"==typeof e?e+"px":e;const f=d({name:"UniNavBar",components:{statusBar:d({name:"UniStatusBar",data:()=>({statusBarHeight:uni.getSystemInfoSync().statusBarHeight+"px"})},[["render",function(t,n,o,l,a,i){return e.openBlock(),e.createElementBlock("view",{style:e.normalizeStyle({height:a.statusBarHeight}),class:"uni-status-bar"},[e.renderSlot(t.$slots,"default",{},void 0,!0)],4)}],["__scopeId","data-v-3da872fd"]])},emits:["clickLeft","clickRight","clickTitle"],props:{dark:{type:Boolean,default:!1},title:{type:String,default:""},leftText:{type:String,default:""},rightText:{type:String,default:""},leftIcon:{type:String,default:""},rightIcon:{type:String,default:""},fixed:{type:[Boolean,String],default:!1},color:{type:String,default:""},backgroundColor:{type:String,default:""},statusBar:{type:[Boolean,String],default:!1},shadow:{type:[Boolean,String],default:!1},border:{type:[Boolean,String],default:!0},height:{type:[Number,String],default:44},leftWidth:{type:[Number,String],default:60},rightWidth:{type:[Number,String],default:60},stat:{type:[Boolean,String],default:""}},computed:{themeBgColor(){return this.dark?this.backgroundColor?this.backgroundColor:this.dark?"#333":"#FFF":this.backgroundColor||"#FFF"},themeColor(){return this.dark?this.color?this.color:this.dark?"#fff":"#333":this.color||"#333"},navbarHeight(){return p(this.height)},leftIconWidth(){return p(this.leftWidth)},rightIconWidth(){return p(this.rightWidth)}},mounted(){uni.report&&this.stat&&""!==this.title&&uni.report("title",this.title)},methods:{onClickLeft(){this.$emit("clickLeft")},onClickRight(){this.$emit("clickRight")},onClickTitle(){this.$emit("clickTitle")}}},[["render",function(t,n,l,a,i,r){const s=e.resolveComponent("status-bar"),c=o(e.resolveDynamicComponent("uni-icons"),m);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-navbar",{"uni-dark":l.dark,"uni-nvue-fixed":l.fixed}])},[e.createElementVNode("view",{class:e.normalizeClass(["uni-navbar__content",{"uni-navbar--fixed":l.fixed,"uni-navbar--shadow":l.shadow,"uni-navbar--border":l.border}]),style:e.normalizeStyle({"background-color":r.themeBgColor,"border-bottom-color":r.themeColor})},[l.statusBar?(e.openBlock(),e.createBlock(s,{key:0})):e.createCommentVNode("v-if",!0),e.createElementVNode("view",{style:e.normalizeStyle({color:r.themeColor,backgroundColor:r.themeBgColor,height:r.navbarHeight}),class:"uni-navbar__header"},[e.createElementVNode("view",{onClick:n[0]||(n[0]=(...e)=>r.onClickLeft&&r.onClickLeft(...e)),class:"uni-navbar__header-btns uni-navbar__header-btns-left",style:e.normalizeStyle({width:r.leftIconWidth})},[e.renderSlot(t.$slots,"left",{},()=>[l.leftIcon.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__content_view"},[e.createVNode(c,{color:r.themeColor,type:l.leftIcon,size:"20"},null,8,["color","type"])])):e.createCommentVNode("v-if",!0),l.leftText.length?(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass([{"uni-navbar-btn-icon-left":!l.leftIcon.length>0},"uni-navbar-btn-text"])},[e.createElementVNode("text",{style:e.normalizeStyle({color:r.themeColor,fontSize:"12px"})},e.toDisplayString(l.leftText),5)],2)):e.createCommentVNode("v-if",!0)],!0)],4),e.createElementVNode("view",{class:"uni-navbar__header-container",onClick:n[1]||(n[1]=(...e)=>r.onClickTitle&&r.onClickTitle(...e))},[e.renderSlot(t.$slots,"default",{},()=>[l.title.length>0?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__header-container-inner"},[e.createElementVNode("text",{class:"uni-nav-bar-text uni-ellipsis-1",style:e.normalizeStyle({color:r.themeColor})},e.toDisplayString(l.title),5)])):e.createCommentVNode("v-if",!0)],!0)]),e.createElementVNode("view",{onClick:n[2]||(n[2]=(...e)=>r.onClickRight&&r.onClickRight(...e)),class:"uni-navbar__header-btns uni-navbar__header-btns-right",style:e.normalizeStyle({width:r.rightIconWidth})},[e.renderSlot(t.$slots,"right",{},()=>[l.rightIcon.length?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createVNode(c,{color:r.themeColor,type:l.rightIcon,size:"22"},null,8,["color","type"])])):e.createCommentVNode("v-if",!0),l.rightText.length&&!l.rightIcon.length?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-navbar-btn-text"},[e.createElementVNode("text",{class:"uni-nav-bar-right-text",style:e.normalizeStyle({color:r.themeColor})},e.toDisplayString(l.rightText),5)])):e.createCommentVNode("v-if",!0)],!0)],4)],4)],6),l.fixed?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-navbar__placeholder"},[l.statusBar?(e.openBlock(),e.createBlock(s,{key:0})):e.createCommentVNode("v-if",!0),e.createElementVNode("view",{class:"uni-navbar__placeholder-view",style:e.normalizeStyle({height:r.navbarHeight})},null,4)])):e.createCommentVNode("v-if",!0)],2)}],["__scopeId","data-v-cde187c7"]]),h=e.defineComponent({__name:"Navbar",props:{leftArrow:{type:Boolean}},emits:["clickLeftIcon","clickRightIcon"],setup(t,{emit:n}){function l(){n("clickLeftIcon"),uni.navigateBack()}function a(){n("clickRightIcon")}return(t,n)=>{const i=o(e.resolveDynamicComponent("uni-nav-bar"),f);return e.openBlock(),e.createBlock(i,e.mergeProps(t.$attrs,{class:"font-bold",title:t.$attrs.title||"🎵 MOO","left-icon":t.$props.leftArrow?"back":void 0,"background-color":"#1a191b",color:"#fffeff",border:!1,fixed:"","status-bar":"",onClickLeft:l,onClickRight:a}),null,16,["title","left-icon"])}}});class g{constructor(e){__publicField(this,"defaults"),__publicField(this,"interceptors"),this.defaults=e,this.interceptors={request:new y,response:new y}}request(e){var t,n;(e={...this.defaults,...e}).url=(n=e.url,/^(https?:)/.test(n)?e.url:e.baseURL+e.url);const o=[(null==(t=this.defaults)?void 0:t.adapter)||v,null];this.interceptors.request.forEach(function(e){o.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let l=Promise.resolve(e),a=0;for(;a<o.length;)l=l.then(o[a++],o[a++]);return l}get(e="",t={}){return this.request({method:"GET",url:e,...t})}head(e="",t={}){return this.request({method:"HEAD",url:e,...t})}post(e="",t,n={}){return this.request({method:"POST",url:e,data:t,...n})}put(e="",t,n={}){return this.request({method:"PUT",url:e,data:t,...n})}delete(e="",t={}){return this.request({method:"DELETE",url:e,...t})}trace(e="",t={}){return this.request({method:"TRACE",url:e,...t})}}class y{constructor(){__publicField(this,"handlers",[])}use(e,t){return this.handlers.push({fulfilled:e||null,rejected:t||null}),this.handlers.length-1}eject(e){this.handlers[e]={fulfilled:null,rejected:null}}clear(){this.handlers=[]}forEach(e){this.handlers.forEach(t=>{e(t)})}}function v(e){return new Promise((t,n)=>{const o=uni.request({...e,success:e=>{t(e)},fail:e=>{n(e)}});e.getRequestTask&&e.getRequestTask(o)})}function x(e){const t=new g(e),n=g.prototype.request.bind(t);return Object.assign(n,function(e,t){const n=["constructor"];return Object.getOwnPropertyNames(t).filter(e=>!n.includes(e)).forEach(n=>{const o=t[n];e[n]="function"==typeof o?o.bind(e):o}),e}(t,g.prototype))}const k={baseURL:"",header:{}},w=Object.assign(x(k),{create:e=>x({...k,...e})}),b={state:{count:0},start(e){if(0!==this.state.count)return++this.state.count;uni.showLoading({title:e||"加载中...",mask:!0}),++this.state.count},close(){if(this.state.count>1)return--this.state.count;uni.hideLoading(),--this.state.count},success(e,t){this.state.count=0,uni.showToast({icon:(null==e?void 0:e.length)>7?"none":"success",title:e,duration:1e3,complete:t})},fail(e,t){this.state.count=0,uni.showToast({icon:(null==e?void 0:e.length)>7?"none":"error",title:e||"请求失败",duration:2e3,complete:t})}},_=w.create({baseURL:"https://kele.160622.xyz:14000",withCredentials:!0});async function C(e){const{songs:t}=await _.get(`/simi/song?id=${e}`);return n("log","at api/play.ts:43","🚀 ~ file: play.ts:36 ~ getSimiSongs ~ songs:",t),t.map(e=>({id:e.id,name:e.name,ar:e.artists,al:e.album}))}function S(e,t){return Math.floor(Math.random()*(t-e))+e}function N(e){for(let t=e.length-1;t>=0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function B(e){const t=/^http:/;return t.test(e)?e.replace(t,"https:"):e}function V(e,t="{y}-{m}-{d} {h}:{i}:{s}"){if(!e)return null;let n;"object"==typeof e?n=e:("string"==typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e,10):e.replace(new RegExp(/-/gm),"/")),"number"==typeof e&&10===e.toString().length&&(e*=1e3),n=new Date(e));const o={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()};return t.replace(/{([ymdhisa])+}/g,(e,t)=>{const n=o[t];return"a"===t?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")})}_.interceptors.response.use(e=>{var t;const{data:n}=e;switch(n.code||(null==(t=n.data)?void 0:t.code)){case 800:case 801:case 802:case 803:case 200:return n}return Promise.reject(new Error(n.message||"请求失败"))},e=>("request:fail abort"===e.errMsg||n("error","at utils/request.ts:50",e),Promise.reject(e)));
/*!
    * pinia v2.0.35
    * (c) 2023 Eduardo San Martin Morote
    * @license MIT
    */
let E;const P=e=>E=e,D=Symbol();function I(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var z,A;(A=z||(z={})).direct="direct",A.patchObject="patch object",A.patchFunction="patch function";const T=()=>{};function $(t,n,o,l=T){t.push(n);const a=()=>{const e=t.indexOf(n);e>-1&&(t.splice(e,1),l())};return!o&&e.getCurrentScope()&&e.onScopeDispose(a),a}function R(e,...t){e.slice().forEach(e=>{e(...t)})}function F(t,n){t instanceof Map&&n instanceof Map&&n.forEach((e,n)=>t.set(n,e)),t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const o in n){if(!n.hasOwnProperty(o))continue;const l=n[o],a=t[o];I(a)&&I(l)&&t.hasOwnProperty(o)&&!e.isRef(l)&&!e.isReactive(l)?t[o]=F(a,l):t[o]=l}return t}const L=Symbol();function M(e){return!I(e)||!e.hasOwnProperty(L)}const{assign:j}=Object;function H(t){return!(!e.isRef(t)||!t.effect)}function U(t,n,o={},l,a,i){let r;const s=j({actions:{}},o),c={deep:!0};let u,d,m,p=e.markRaw([]),f=e.markRaw([]);const h=l.state.value[t];let g;function y(n){let o;u=d=!1,"function"==typeof n?(n(l.state.value[t]),o={type:z.patchFunction,storeId:t,events:m}):(F(l.state.value[t],n),o={type:z.patchObject,payload:n,storeId:t,events:m});const a=g=Symbol();e.nextTick().then(()=>{g===a&&(u=!0)}),d=!0,R(p,o,l.state.value[t])}i||h||(l.state.value[t]={}),e.ref({});const v=i?function(){const{state:e}=o,t=e?e():{};this.$patch(e=>{j(e,t)})}:T;function x(e,n){return function(){P(l);const o=Array.from(arguments),a=[],i=[];let r;R(f,{args:o,name:e,store:w,after:function(e){a.push(e)},onError:function(e){i.push(e)}});try{r=n.apply(this&&this.$id===t?this:w,o)}catch(s){throw R(i,s),s}return r instanceof Promise?r.then(e=>(R(a,e),e)).catch(e=>(R(i,e),Promise.reject(e))):(R(a,r),r)}}const k={_p:l,$id:t,$onAction:$.bind(null,f),$patch:y,$reset:v,$subscribe(n,o={}){const a=$(p,n,o.detached,()=>i()),i=r.run(()=>e.watch(()=>l.state.value[t],e=>{("sync"===o.flush?d:u)&&n({storeId:t,type:z.direct,events:m},e)},j({},c,o)));return a},$dispose:function(){r.stop(),p=[],f=[],l._s.delete(t)}},w=e.reactive(k);l._s.set(t,w);const b=l._e.run(()=>(r=e.effectScope(),r.run(()=>n())));for(const _ in b){const n=b[_];if(e.isRef(n)&&!H(n)||e.isReactive(n))i||(h&&M(n)&&(e.isRef(n)?n.value=h[_]:F(n,h[_])),l.state.value[t][_]=n);else if("function"==typeof n){const e=x(_,n);b[_]=e,s.actions[_]=n}}return j(w,b),j(e.toRaw(w),b),Object.defineProperty(w,"$state",{get:()=>l.state.value[t],set:e=>{y(t=>{j(t,e)})}}),l._p.forEach(e=>{j(w,r.run(()=>e({store:w,app:l._a,pinia:l,options:s})))}),h&&i&&o.hydrate&&o.hydrate(w.$state,h),u=!0,d=!0,w}function J(t,n,o){let l,a;const i="function"==typeof n;function r(t,o){const r=e.getCurrentInstance();(t=t||r&&e.inject(D,null))&&P(t),(t=E)._s.has(l)||(i?U(l,n,a,t):function(t,n,o){const{state:l,actions:a,getters:i}=n,r=o.state.value[t];let s;s=U(t,function(){r||(o.state.value[t]=l?l():{});const n=e.toRefs(o.state.value[t]);return j(n,a,Object.keys(i||{}).reduce((n,l)=>(n[l]=e.markRaw(e.computed(()=>{P(o);const e=o._s.get(t);return i[l].call(e,e)})),n),{}))},n,o,0,!0)}(l,a,t));return t._s.get(l)}return"string"==typeof t?(l=t,a=i?o:n):(a=t,l=t.id),r.$id=l,r}function O(e,t=0,n=30){return _.get(`/user/playlist?uid=${e}&offset=${t}&limit=${n}`)}const q=J("user",()=>{const t=e.ref(),o=e.ref();return{profile:t,subcount:o,login:async function(e){const{data:o}=await function(e){return _.post(`/login/status?timestamp=${Date.now()}`,{cookie:e})}(e);n("log","at store/user.ts:12","🚀 ~ file: user.ts:15 ~ getLoginStatus ~ data:",o),t.value=o.profile},logout:async function(){const e=await _.get("/logout");n("log","at store/user.ts:18","🚀 ~ file: user.ts:15 ~ logout ~ res:",e),200===e.code&&(t.value=null,o.value=void 0,uni.removeStorage({key:"cookie"}),uni.reLaunch({url:"/pages/index/index"}))}}});async function W(e=uni.getStorageSync("cookie")){if(!e)return;const t=q();await t.login(e);const o=await _.get(`/user/subcount?timestamp=${Date.now()}`,{});n("log","at store/user.ts:44","🚀 ~ file: user.ts:41 ~ getUserSubcount ~ res:",o),t.subcount=o}function X(t,o){return uni.getStorage({key:t,success({data:t}){t&&(e.isRef(o)?o.value=t:e.isReactive(o)&&(Array.isArray(t)&&Array.isArray(o)?t.forEach((e,t)=>{o[t]=e}):Object.assign(o,t)))},fail(e){e.errMsg&&e.errMsg.includes("storage 没有找到相同key的存储记录")||n("error","at hooks/useCache.ts:32",e)},complete(){e.watch(o,e=>{uni.setStorage({key:t,data:e,fail(e){n("error","at hooks/useCache.ts:39",e)}})})}}),o}const G=J("audio",()=>{var t;const o=(l=()=>q(),{get value(){return delete this.value,this.value=l()}});var l;const a=["loop","random"],i=e.markRaw((null==(t=uni.getBackgroundAudioManager)?void 0:t.call(uni))||uni.createInnerAudioContext()),r=e.ref(!1),s=e.ref(!1),c=e.ref(!1),u=e.ref(0),d=e.ref(0),m=X("mode",e.ref("loop")),p=X("playlist",e.shallowRef()),f=X("songs",e.shallowRef([])),h=e.shallowRef(),g=e.ref(-1),y=e.shallowRef();function v(){if(!f.value.length)return;const e=f.value.length-1,t=g.value,n=t===e?0:t+1;y.value&&t===e?C(f.value[t].id).then(e=>{y.value=f.value[t],f.value=e,x(f.value[n],n)}):x(f.value[n],n)}async function x(e,t){var l;if(i.pause(),g.value=t,(null==(l=h.value)?void 0:l.song.id)===e.id&&h.value.urlInfo.url)return i.seek(0),i.play();try{r.value=!0;const{data:[t]}=await function(e,t="standard"){return _.get(`/song/url/v1?id=${e}&level=${t}`,{})}(e.id,o.value.profile?"lossless":"standard");n("log","at store/audio.ts:74","🚀 ~ file: audio.ts:58 ~ setCurrentSong ~ urlInfo:",t);const l=h.value;if((h.value={song:e,urlInfo:t}).urlInfo.url)return function({song:e,urlInfo:t}){i.title=e.name,i.epname=e.al.name,i.singer=e.ar.reduce((e,{name:t})=>e+(t+". "),""),i.coverImgUrl=e.al.picUrl+"?param=500y500",i.src=B(t.url)}(h.value);if(!l||l.urlInfo.url)return v();throw o.value.profile?b.fail("播放地址失效,请尝试重新登录"):b.fail("播放地址失效"),new Error("播放地址失效")}catch(a){i.pause(),n("error","at store/audio.ts:89",a),r.value=!1,s.value=!1}}let k=[];return{audio:i,isLoading:r,isPlay:s,isSeeked:c,duration:u,currentTime:d,mode:m,playlist:p,songs:f,associationSong:y,currentSongInfo:h,currentSongIndex:g,setPreSong:function(){if(!f.value.length)return;const e=f.value.length-1,t=g.value,n=0===t?e:t-1;x(f.value[n],n)},setCurrentSong:x,setNextSong:v,setPlayMode:function e(){var t;if(a[0]!==m.value)return a.unshift(a.pop()),e();if(a.unshift(m.value=a.pop()),!f.value.length)return;switch(m.value){case"loop":f.value=k,k=[];break;case"random":k=f.value,f.value=N(k.slice())}const n=null==(t=h.value)?void 0:t.song.id;g.value=f.value.findIndex(e=>e.id===n)},onPlay:async function(e,t,n,o){switch(p.value!==n&&(p.value=n),!o&&y.value&&(y.value=void 0),m.value){case"random":{k=t,f.value=N(k.slice());const n=t[e].id;await x(t[e],f.value.findIndex(e=>e.id===n));break}case"loop":f.value!==t&&(f.value=t),await x(t[e],e)}},toggle:function(){var e;(null==(e=h.value)?void 0:e.urlInfo.url)&&(s.value?i.pause():i.play())}}});const Y=e.defineComponent({__name:"Countdown",setup(t){const n=G();return(t,o)=>(e.openBlock(),e.createElementBlock("view",{class:"will-change-contents w-[140rpx] leading-[110rpx] text-grey-1 font-bold text-[48rpx]"},e.toDisplayString(function(e,t){const n=Math.floor(e-t);if(!n||n<0)return"00:00";let o=Math.floor(n/60)+"",l=n%60+"";return 1===o.length&&(o="0"+o),1===l.length&&(l="0"+l),o+":"+l}(e.unref(n).duration,e.unref(n).currentTime)),1))}}),Q=e.defineComponent({__name:"JImage",props:{src:null,width:{default:"100%"},height:{default:"100%"},radius:{default:"0"},lazyLoad:{type:Boolean,default:!1},mode:{default:"scaleToFill"},webp:{default:!1},fadeShow:{default:!0},showMenuByLongpress:{default:!1},draggable:{default:!0}},emits:["click"],setup(t){const n=t,o=e.ref(!1),l=e.ref(!1);let a;return e.onMounted(()=>{var t;n.lazyLoad&&(a=uni.createIntersectionObserver(null==(t=e.getCurrentInstance())?void 0:t.proxy),a.relativeToViewport({bottom:100}).observe(".j-image",e=>{0!==e.intersectionRatio&&(o.value=!0,null==a||a.disconnect())}))}),e.onUnmounted(()=>{null==a||a.disconnect()}),(n,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["relative overflow-hidden",{"before:absolute before:z-50 before:alt before:animate-pulse":!e.unref(l)}]),style:e.normalizeStyle({width:t.width,height:t.height,"border-radius":t.radius}),onClick:a[1]||(a[1]=e=>n.$emit("click"))},[e.createElementVNode("image",{class:e.normalizeClass(["j-image w-full h-full transition-opacity duration-1000",e.unref(l)?"opacity-100":"opacity-0"]),src:!t.lazyLoad||e.unref(o)||e.unref(l)?e.unref(B)(t.src):"",mode:t.mode,"fade-show":t.fadeShow,webp:t.webp,"show-menu-by-longpress":t.showMenuByLongpress,draggable:t.draggable,onLoad:a[0]||(a[0]=e=>l.value=!0)},null,42,["src","mode","fade-show","webp","show-menu-by-longpress","draggable"])],6))}}),Z=e.defineComponent({__name:"JIcon",props:{type:{default:""},size:{default:""},color:{default:""}},emits:["click"],setup:t=>(n,o)=>(e.openBlock(),e.createElementBlock("text",{class:e.normalizeClass(["iconfont btn-zoom",t.type]),style:e.normalizeStyle({...t.size?{fontSize:t.size}:{},...t.color?{color:t.color}:{}}),onClick:o[0]||(o[0]=e=>n.$emit("click"))},null,6))});class K{constructor(e,t){this.options=e,this.animation=uni.createAnimation(e),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let n=this.currentStepAnimates[this.next],o={};if(o=n||{styles:{},config:{}},ee.includes(e)){o.styles.transform||(o.styles.transform="");let n="";"rotate"===e&&(n="deg"),o.styles.transform+=`${e}(${t+n}) `}else o.styles[e]=`${t}`;this.currentStepAnimates[this.next]=o}_animateRun(e={},t={}){let n=this.$.$refs.ani.ref;if(n)return new Promise((o,l)=>{nvueAnimation.transition(n,{styles:e,...t},e=>{o()})})}_nvueNextAnimate(e,t=0,n){let o=e[t];if(o){let{styles:l,config:a}=o;this._animateRun(l,a).then(()=>{t+=1,this._nvueNextAnimate(e,t,n)})}else this.currentStepAnimates={},"function"==typeof n&&n(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout(()=>{"function"==typeof e&&e()},this.$.durationTime)}}const ee=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function te(e,t){if(t)return clearTimeout(t.timer),new K(e,t)}ee.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach(e=>{K.prototype[e]=function(...t){return this.animation[e](...t),this}});const ne=d({name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e={...this.styles,"transition-duration":this.duration/1e3+"s"},t="";for(let n in e){t+=this.toLine(n)+":"+e[n]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=te(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let t in e)try{"object"==typeof e[t]?this.animation[t](...e[t]):this.animation[t](e[t])}catch(o){n("error","at uni_modules/uni-transition/components/uni-transition/uni-transition.vue:139",`方法 ${t} 不存在`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick(()=>{this.timer=setTimeout(()=>{this.animation=te(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})},20)})},close(e){this.animation&&this.tranfromInit(!0).step().run(()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})})},styleInit(e){let t={transform:""},n=(e,n)=>{"fade"===n?t.opacity=this.animationType(e)[n]:t.transform+=this.animationType(e)[n]+" "};return"string"==typeof this.modeClass?n(e,this.modeClass):this.modeClass.forEach(t=>{n(e,t)}),t},tranfromInit(e){let t=(e,t)=>{let n=null;"fade"===t?n=e?0:1:(n=e?"-100%":"0","zoom-in"===t&&(n=e?.8:1),"zoom-out"===t&&(n=e?1.2:1),"slide-right"===t&&(n=e?"100%":"0"),"slide-bottom"===t&&(n=e?"100%":"0")),this.animation[this.animationMode()[t]](n)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach(n=>{t(e,n)}),this.animation},animationType:e=>({fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}},[["render",function(t,n,o,l,a,i){return a.isShow?(e.openBlock(),e.createElementBlock("view",{key:0,ref:"ani",animation:a.animationData,class:e.normalizeClass(o.customClass),style:e.normalizeStyle(i.transformStyles),onClick:n[0]||(n[0]=(...e)=>i.onClick&&i.onClick(...e))},[e.renderSlot(t.$slots,"default")],14,["animation"])):e.createCommentVNode("v-if",!0)}]]);const oe=d({name:"uniPopup",components:{},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup(e){}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:n,safeArea:o,screenHeight:l,safeAreaInsets:a}=uni.getSystemInfoSync();this.popupWidth=e,this.popupHeight=t+(n||0),o&&this.safeArea?this.safeAreaInsets=a.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(){},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){if(this.showPopup)return;e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):n("error","at uni_modules/uni-popup/components/uni-popup/uni-popup.vue:279","缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.showPopup=!1},300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick(()=>{this.messageChild&&"message"===this.type&&this.messageChild.timerClose()}))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},e||(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)}}},[["render",function(t,n,l,a,i,r){const s=o(e.resolveDynamicComponent("uni-transition"),ne);return i.showPopup?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["uni-popup",[i.popupstyle,r.isDesktop?"fixforpc-z-index":""]])},[e.createElementVNode("view",{onTouchstart:n[1]||(n[1]=(...e)=>r.touchstart&&r.touchstart(...e))},[i.maskShow?(e.openBlock(),e.createBlock(s,{key:"1",name:"mask","mode-class":"fade",styles:i.maskClass,duration:i.duration,show:i.showTrans,onClick:r.onTap},null,8,["styles","duration","show","onClick"])):e.createCommentVNode("v-if",!0),e.createVNode(s,{key:"2","mode-class":i.ani,name:"content",styles:i.transClass,duration:i.duration,show:i.showTrans,onClick:r.onTap},{default:e.withCtx(()=>[e.createElementVNode("view",{class:e.normalizeClass(["uni-popup__wrapper",[i.popupstyle]]),style:e.normalizeStyle({backgroundColor:r.bg}),onClick:n[0]||(n[0]=(...e)=>r.clear&&r.clear(...e))},[e.renderSlot(t.$slots,"default",{},void 0,!0)],6)]),_:3},8,["mode-class","styles","duration","show","onClick"])],32)],2)):e.createCommentVNode("v-if",!0)}],["__scopeId","data-v-f279c1e3"]]),le=e.defineComponent({__name:"Subtitle",props:{title:{default:""},icon:{default:"icon-arrow"},iconSize:{default:"40rpx"},url:{default:""},clickable:{type:Boolean,default:!1}},emits:["title"],setup(t,{emit:l}){const a=t;function i(){l("title"),a.url&&uni.navigateTo({url:a.url,fail(e){n("error","at components/Subtitle/Subtitle.vue:57",e)}})}return(n,l)=>{const a=o(e.resolveDynamicComponent("JIcon"),Z);return e.openBlock(),e.createElementBlock("view",{class:"my-[20rpx] py-[20rpx] text-[34rpx] font-bold text-white-1 flex justify-between items-center","hover-class":t.clickable?"bg-grey-1/10":"","hover-stay-time":50,onClick:i},[e.renderSlot(n.$slots,"title",{},()=>[e.createElementVNode("text",{class:"title"},e.toDisplayString(t.title),1)]),e.renderSlot(n.$slots,"icon",{},()=>[e.createVNode(a,{type:t.icon,size:t.iconSize,class:"text-grey-1"},null,8,["type","size"])])],8,["hover-class"])}}});function ae(e){const t=getCurrentPages();t.length&&t.pop().$page.fullPath===(e.url||e)||uni.navigateTo("string"==typeof e?{url:e,fail:e=>{n("error","at hooks/useNavigateTo.ts:24",e)}}:e)}const ie=d(e.defineComponent({__name:"Song",props:{song:null,isRun:{type:Boolean},isPlay:{type:Boolean},cannotPlay:{type:Boolean}},emits:["click"],setup(t){const n=t,l=e.ref(!0),a=e.watch(()=>null==n?void 0:n.cannotPlay,e=>{l.value=!e,a()});return(n,a)=>{const i=o(e.resolveDynamicComponent("JImage"),Q),r=o(e.resolveDynamicComponent("JIcon"),Z);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("view",{class:e.normalizeClass(["active:animate-back w-auto h-[140rpx] mb-5 flex justify-center items-center",{"!opacity-30 pointer-events-none":!e.unref(l)}]),"hover-stay-time":100,"hover-class":"bg-grey-1/10",onClick:a[0]||(a[0]=e=>n.$emit("click"))},[e.createVNode(i,{class:"mr-5",src:t.song.al.picUrl+"?param=100y100",width:"140rpx",height:"140rpx",radius:"12rpx","lazy-load":""},null,8,["src"]),e.createElementVNode("view",{class:"flex-1 flex flex-col justify-around h-full"},[e.createElementVNode("text",{class:"w-[420rpx] text-[38rpx] font-bold truncate text-white-1"},e.toDisplayString(t.song.name),1),e.createElementVNode("view",{class:"w-[420rpx] h-[40rpx] space-x-1 text-[28rpx] truncate text-grey-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.song.ar,t=>(e.openBlock(),e.createElementBlock("text",{key:t.name,class:"active:text-white-1",onClick:e.withModifiers(o=>("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))(`/sharedPages/artist/artist?id=${t.id}`),["stop"])},e.toDisplayString(t.name)+". ",9,["onClick"]))),128))])]),t.isRun?(e.openBlock(),e.createElementBlock("view",{key:0,class:"w-[44rpx] h-[70rpx] flex items-end"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(4,n=>e.createElementVNode("i",{key:n,class:e.normalizeClass(["w-[25%] mr-[2rpx] bg-white-1","wave"+n+(t.isPlay?" run":" paused")])},null,2)),64))])):(e.openBlock(),e.createBlock(r,{key:1,class:"icon-more text-grey-1 text-[44rpx]"}))],2)])}}}),[["__scopeId","data-v-2761044e"]]),re=e.defineComponent({__name:"PlayQueue",props:{saveArea:{type:Boolean}},emits:["change"],setup(t,{emit:l}){const a=G(),i=e.ref("");e.onMounted(async()=>{await async function(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}(333),e.watch(()=>a.currentSongIndex,e=>{var t;(null==(t=a.currentSongInfo)?void 0:t.song)&&(i.value="_"+a.songs[e].id)},{immediate:!0})});const r=10,s=e.ref(a.currentSongIndex<r?0:a.currentSongIndex-r),c=e.ref(a.currentSongIndex+r),u=e.computed(()=>a.songs.slice(s.value,c.value));function d(){const e=c.value+r;c.value===e||c.value>=a.songs.length-1||(n("log","at components/PlayQueue/PlayQueue.vue:112","🚀 ~ file: PlaylistPopup.vue:94 ~ onScrollToLower",{bottomOffset:c,end:e}),c.value=e)}return e.watch(()=>a.songs,()=>{s.value=a.currentSongIndex<r?0:a.currentSongIndex-r,c.value=a.currentSongIndex+r}),(n,r)=>{const s=o(e.resolveDynamicComponent("JImage"),Q),c=o(e.resolveDynamicComponent("Song"),ie);return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass({"pb-[var(--save-bottom)]":t.saveArea})},[e.renderSlot(n.$slots,"default",{list:e.unref(u)}),e.createElementVNode("scroll-view",{class:"h-full","scroll-y":"","enable-passive":"","scroll-anchoring":"","scroll-with-animation":"","scroll-into-view":e.unref(a).associationSong?void 0:e.unref(i),"lower-threshold":500,onScrolltolower:d},[e.unref(a).associationSong?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("view",{class:"flex justify-center items-center"},[e.createVNode(s,{class:"mr-5",src:e.unref(a).associationSong.al.picUrl+"?param=100y100",width:"140rpx",height:"140rpx",radius:"12rpx","lazy-load":""},null,8,["src"]),e.createElementVNode("view",{class:"flex-1 flex flex-col justify-around h-full"},[e.createElementVNode("text",{class:"w-[420rpx] text-[38rpx] font-bold truncate text-white-1"},e.toDisplayString(e.unref(a).associationSong.name),1),e.createElementVNode("view",{class:"w-[420rpx] h-[40rpx] space-x-1 text-[28rpx] truncate text-grey-1"},[e.createElementVNode("text",null,e.toDisplayString(e.unref(a).associationSong.ar.reduce((e,t)=>e+(t.name+"."),"")),1)])])]),e.createElementVNode("view",{class:"text-lg text-white-1 font-bold text-center [border-bottom:1px_dashed] mb-5"},"歌曲联想")],64)):e.createCommentVNode("v-if",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),t=>{var n,o,i,r;return e.openBlock(),e.createBlock(c,{id:"_"+t.id,key:t.id,song:t,"is-play":(null==(n=e.unref(a).currentSongInfo)?void 0:n.song.id)===t.id&&e.unref(a).isPlay,"is-run":(null==(o=e.unref(a).currentSongInfo)?void 0:o.song.id)===t.id,"cannot-play":(null==(i=e.unref(a).currentSongInfo)?void 0:i.song.id)===t.id&&!(null==(r=e.unref(a).currentSongInfo)?void 0:r.urlInfo.url),onClick:e=>function(e){const t=a.songs.findIndex(t=>t.id===e);a.setCurrentSong(a.songs[t],t),l("change")}(t.id)},null,8,["id","song","is-play","is-run","cannot-play","onClick"])}),128)),t.saveArea?(e.openBlock(),e.createElementBlock("view",{key:1,class:"w-full h-[var(--save-bottom)]"})):e.createCommentVNode("v-if",!0)],40,["scroll-into-view"])],2)}}}),se=e.defineComponent({__name:"PlaylistPopup",setup(t){const l=G();return(t,a)=>{const i=o(e.resolveDynamicComponent("JIcon"),Z),r=o(e.resolveDynamicComponent("Subtitle"),le),s=o(e.resolveDynamicComponent("PlayQueue"),re);return e.openBlock(),e.createElementBlock("view",{class:"bg-black-2 rounded-tl-lg rounded-tr-lg overflow-hidden"},[e.createVNode(s,{class:"box-border px-[28rpx] h-[50vh]","save-area":""},{default:e.withCtx(({list:t})=>[e.createVNode(r,{class:"bg-black-2"},{title:e.withCtx(()=>[e.createElementVNode("view",{class:"flex items-center"},[e.createElementVNode("button",{class:"h-[64rpx] !leading-[64rpx] m-0 rounded-full bg-yellow-1 text-black-1",size:"mini",onClick:n=>e.unref(l).setCurrentSong(t[0],0)},[e.createVNode(i,{class:"icon-play text-[42rpx]"})],8,["onClick"]),e.createElementVNode("text",{class:"text-grey-1 inline-block align-middle ml-5 font-[38rpx]"},e.toDisplayString(e.unref(l).songs.length),1)])]),icon:e.withCtx(()=>{var t,o;return[e.createVNode(i,{class:e.normalizeClass([[e.unref(l).currentSongInfo?"icon-associate":"pointer-events-none",(null==(t=e.unref(l).associationSong)?void 0:t.id)===(null==(o=e.unref(l).currentSongInfo)?void 0:o.song.id)?"text-yellow-1":"text-white-1"],"text-[50rpx] transition-all duration-300"]),onClick:a[0]||(a[0]=t=>{var o;return async function(e){var t;if(!e||e.id===(null==(t=l.associationSong)?void 0:t.id))return;const o=await C(e.id);n("log","at components/PlayController/components/PlaylistPopup/PlaylistPopup.vue:51","🚀 ~ file: PlaylistPopup.vue:50 ~ onAssociate ~ songs:",o),l.associationSong=e,l.currentSongIndex=0,l.songs=[e,...o]}(null==(o=e.unref(l).currentSongInfo)?void 0:o.song)})},null,8,["class"])]}),_:2},1024)]),_:1})])}}}),ce=e.defineComponent({__name:"PlayController",emits:["record"],setup(t,{emit:l}){const r=G(),s=130;let c=-1;const u=e.ref(!1),d=e.ref(175),m=e.shallowRef(),p=e.ref(!1);
//! 为了解决uni-popup组件进行更新，状态会发生重置的bug（导致自动关闭），所以在popup关闭后再更新"icon"
let f="";const h=e.computed(()=>p.value?f:f=!p.value&&r.associationSong?"icon-associate":`icon-${r.mode}`);function g(){var e;if(!r.currentSongInfo)return;let t;l("record",e=>t=e),t||("sharedPages/play/play"===(null==(e=getCurrentPages().pop())?void 0:e.route)?uni.navigateBack():ae("/sharedPages/play/play"))}function y({detail:{x:e,source:t}}){t&&(c=e)}function v(){if(n("log","at components/PlayController/PlayController.vue:138","🚀 ~ file: PlayController.vue:63 ~ onMoveEnd ~ moved:",c),-1===c)return;d.value=-1,setTimeout(()=>{d.value=175,c=-1});c>153.125?(n("log","at components/PlayController/PlayController.vue:156","下一首"),r.setNextSong()):c<21.875&&(n("log","at components/PlayController/PlayController.vue:159","上一首"),r.setPreSong())}function x(){var e,t;r.songs.length&&(p.value=!0,null==(t=null==(e=m.value)?void 0:e.open)||t.call(e))}function k(){var e;null==(e=m.value)||e.close(),setTimeout(()=>{p.value=!1},333)}return a(()=>{u.value=!1}),i(()=>{u.value=!0,p.value&&k()}),(t,n)=>{const l=o(e.resolveDynamicComponent("Countdown"),Y),a=o(e.resolveDynamicComponent("JImage"),Q),i=o(e.resolveDynamicComponent("JIcon"),Z),c=o(e.resolveDynamicComponent("uni-popup"),oe);return e.openBlock(),e.createElementBlock("view",null,[e.withDirectives(e.createElementVNode("view",{class:"h-[110rpx] px-[30rpx] rounded-[60rpx] fixed bottom-[4%] left-[3%] z-[999] box-border flex justify-between items-center bg-black-1 mb-[var(--ios-bottom)]",style:e.normalizeStyle({width:"480rpx"})},[e.createVNode(l),e.createElementVNode("movable-area",{class:"h-[110rpx] absolute left-0 top-0 z-10",style:e.normalizeStyle({width:"480rpx"})},[e.createElementVNode("movable-view",{class:"h-[110rpx] flex items-center",style:e.normalizeStyle({width:s+"rpx"}),x:e.unref(d)+"rpx",direction:"horizontal",onChange:y,onTouchendPassive:v},[e.createVNode(a,{src:"/static/record.png",width:s+"rpx",height:s+"rpx",class:e.normalizeClass(["will-change-transform",e.unref(r).isLoading?"animate-bounce [animation-delay:400ms]":e.unref(r).isPlay?"animate-spin [animation-duration:5s]":"animate-spin [animation-duration:5s] [animation-play-state:paused]"]),onClick:g},null,8,["width","height","class"])],44,["x"])],4),e.createElementVNode("view",{class:"relative"},[e.createVNode(i,{type:e.unref(r).isPlay?"icon-audioPause":"icon-audioPlay",class:"text-white-1 text-[60rpx]"},null,8,["type"]),e.createCommentVNode(" ! 隐形的占位事件触发元素，因为播放控制icon被movable区域覆盖了 "),e.createElementVNode("view",{class:"w-[60rpx] h-full absolute top-0 right-0 z-50 bg-yellow-1 opacity-0",onClick:n[0]||(n[0]=(...t)=>e.unref(r).toggle&&e.unref(r).toggle(...t))})])],4),[[e.vShow,!e.unref(u)]]),e.createElementVNode("view",{class:"h-[110rpx] px-[30rpx] rounded-[60rpx] fixed bottom-[4%] right-[3%] z-[999] box-border flex justify-between items-center bg-black-1 mb-[var(--ios-bottom)]"},[e.createVNode(i,{type:"icon-menu",class:"text-white-1 text-[70rpx] font-bold mr-3",onClick:x}),e.createVNode(c,{ref_key:"popup",ref:m,type:"bottom","safe-area":!1,onMaskClick:k},{default:e.withCtx(()=>[e.unref(p)?(e.openBlock(),e.createBlock(se,{key:0})):e.createCommentVNode("v-if",!0)]),_:1},512),e.createVNode(i,{type:e.unref(h),class:"text-yellow-1 text-[70rpx]",onClick:n[1]||(n[1]=t=>!e.unref(r).associationSong&&e.unref(r).setPlayMode())},null,8,["type"])])])}}}),ue=e.defineComponent({__name:"NavTitle",props:{pages:null,currentPage:null},setup(t){const n=t,l=q(),a=e.computed(()=>"home"===n.currentPage);return(n,i)=>{const r=o(e.resolveDynamicComponent("JIcon"),Z),s=o(e.resolveDynamicComponent("JImage"),Q);return e.openBlock(),e.createElementBlock("view",{class:"bg-black-2 text-white-1 text-[70rpx] px-[28rpx] pb-[20rpx]"},[e.createElementVNode("view",{class:"flex justify-between items-center"},[e.createElementVNode("text",null,e.toDisplayString(e.unref(a)?"DISCOVER":"PROFILE"),1),e.unref(l).profile?(e.openBlock(),e.createBlock(s,{key:1,class:e.normalizeClass({hidden:!e.unref(a)}),src:e.unref(l).profile.avatarUrl,width:"75rpx",height:"75rpx",radius:"50%"},null,8,["class","src"])):(e.openBlock(),e.createBlock(r,{key:0,class:e.normalizeClass([{hidden:!e.unref(a)},"icon-user text-white-1 text-[60rpx]"]),onClick:i[0]||(i[0]=t=>("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))("/sharedPages/login/login"))},null,8,["class"])),e.createVNode(r,{class:e.normalizeClass([{hidden:e.unref(a)},"text-white-1 text-[60rpx]"]),type:"icon-setting"},null,8,["class"])]),e.createElementVNode("view",{class:"flex"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.pages,n=>(e.openBlock(),e.createElementBlock("view",{key:n,class:e.normalizeClass([t.currentPage===n?"w-[36rpx] !rounded-[20rpx] bg-white-1":"","w-[18rpx] h-[18rpx] bg-grey-1 rounded-[50%] mr-1 transition-[width] duration-500 ease-in-out"])},null,2))),128))])])}}}),de=e.defineComponent({__name:"JSearch",props:{modelValue:null,placeholder:{default:""},placeholderStyle:{default:""},radius:{default:"10rpx"},bgColor:{default:"#F8F8F8"},color:{default:"#333"},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:{default:140},clearButton:{type:Boolean,default:!0},cancelButton:{type:Boolean,default:!1}},emits:["update:modelValue","clear","click","focus","confirm","blur","cancel"],setup:t=>(n,l)=>{const a=o(e.resolveDynamicComponent("uni-icons"),m);return e.openBlock(),e.createElementBlock("view",{class:"flex items-center mx-[28rpx] my-[20rpx]"},[e.createElementVNode("view",{class:"box-border h-[74rpx] flex-1 flex justify-center items-center px-2 py-[4rpx]",style:e.normalizeStyle({borderRadius:t.radius,backgroundColor:t.bgColor}),onClick:l[5]||(l[5]=e=>n.$emit("click"))},[e.renderSlot(n.$slots,"searchIcon",{},()=>[e.createVNode(a,{color:"#c0c4cc",size:"18",type:"search"})]),!t.readonly||t.focus||t.placeholder?(e.openBlock(),e.createElementBlock("input",{key:0,value:t.modelValue,class:"flex-1 h-full text-[30rpx] mx-2",placeholder:t.placeholder,"placeholder-style":t.placeholderStyle,focus:t.focus,disabled:t.readonly,maxlength:t.maxlength,"confirm-type":"search",type:"text",style:e.normalizeStyle({color:t.color}),onInput:l[0]||(l[0]=e=>n.$emit("update:modelValue",e.detail.value)),onFocus:l[1]||(l[1]=e=>n.$emit("focus")),onBlur:l[2]||(l[2]=e=>n.$emit("blur")),onConfirm:l[3]||(l[3]=e=>n.$emit("confirm",e.detail.value))},null,44,["value","placeholder","placeholder-style","focus","disabled","maxlength"])):e.createCommentVNode("v-if",!0),t.clearButton?e.withDirectives((e.openBlock(),e.createElementBlock("view",{key:1,class:"btn-zoom",onClick:l[4]||(l[4]=e=>{n.$emit("update:modelValue",""),n.$emit("clear")})},[e.renderSlot(n.$slots,"clearIcon",{},()=>[e.createVNode(a,{color:"#c0c4cc",size:"20",type:"clear"})])],512)),[[e.vShow,t.modelValue]]):e.createCommentVNode("v-if",!0)],4),t.cancelButton?e.renderSlot(n.$slots,"cancel",{key:0},()=>[e.createElementVNode("view",{class:"ml-[28rpx] text-white-1 btn-zoom",onClick:l[6]||(l[6]=e=>{n.$emit("update:modelValue",""),n.$emit("cancel")})}," 取消 ")]):e.createCommentVNode("v-if",!0)])}}),me=e.defineComponent({__name:"Search",setup(t){const l=e.ref("");function a(){uni.navigateTo({url:"/sharedPages/search/search",animationType:"zoom-fade-out",animationDuration:300,fail:e=>{n("error","at pages/index/components/Search/Search.vue:25",e)}})}return(t,n)=>{const i=o(e.resolveDynamicComponent("JIcon"),Z),r=o(e.resolveDynamicComponent("JSearch"),de);return e.openBlock(),e.createBlock(r,{modelValue:e.unref(l),"onUpdate:modelValue":n[0]||(n[0]=t=>e.isRef(l)?l.value=t:null),class:"mt-0","bg-color":"#010001",color:"#fce939",radius:"30rpx",readonly:"",onClick:a},{searchIcon:e.withCtx(()=>[e.createVNode(i,{class:"icon-search text-[60rpx] text-yellow-1"})]),_:1},8,["modelValue"])}}});function pe(e){return _.get(`/playlist/detail?id=${e}`)}function fe(e){return _.get(`/personalized?limit=${e}`)}function he(e,t){return _.get(`/top/playlist?limit=${t}&order=hot&offset=${e}`)}const ge=e.defineComponent({__name:"Carousel",setup(t){const l=G(),r=e.ref(!1),s=e.shallowRef([{}]),c=e.ref(0);return async function(){n("log","at pages/index/components/Home/components/Carousel/Carousel.vue:92","🎯 Carousel fetchBanner 开始执行");try{const{banners:e}=await function(e=2){return _.get(`/banner?type=${e}`)}();s.value=e.filter(e=>3e3!==e.targetType),n("log","at pages/index/components/Home/components/Carousel/Carousel.vue:97","🚀 ~ file: Carousel.vue:40 ~ fetchBanner ~ banners:",e)}catch(e){n("error","at pages/index/components/Home/components/Carousel/Carousel.vue:99","❌ Carousel fetchBanner 失败:",e)}}(),a(()=>{r.value=!0}),i(()=>{r.value=!1}),(t,a)=>{const i=o(e.resolveDynamicComponent("JImage"),Q);return e.openBlock(),e.createElementBlock("view",null,[e.createElementVNode("swiper",{class:"rounded-[14rpx] overflow-hidden",autoplay:e.unref(r),duration:400,interval:4e3,circular:"","indicator-dots":"","indicator-color":"#ABA8A8","indicator-active-color":"#fff",onChange:a[0]||(a[0]=({detail:{current:e}})=>{c.value=e})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s),(t,o)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:o,"skip-hidden-item-layout":"",class:"relative"},[e.createVNode(i,{src:t.pic||"","lazy-load":e.unref(c)!==o,width:"100%",height:"100%",radius:"14rpx",onClick:e=>async function({targetType:e,targetId:t,song:o}){switch(e){case 1:o&&(l.$patch(e=>{e.playlist&&(e.playlist=void 0),e.songs=[o],l.setCurrentSong(o,0)}),uni.navigateTo({url:"/sharedPages/play/play",fail:e=>{n("error","at pages/index/components/Home/components/Carousel/Carousel.vue:66",e)}}));break;case 10:uni.navigateTo({url:`/sharedPages/album/album?id=${t}`,fail(e){n("error","at pages/index/components/Home/components/Carousel/Carousel.vue:74",e)}});break;case 1e3:{const{playlist:e}=await pe(t);uni.navigateTo({url:`/sharedPages/playlist/playlist?id=${t}`,success:t=>{t.eventChannel.emit("acceptPlaylist",e)},fail:e=>{n("error","at pages/index/components/Home/components/Carousel/Carousel.vue:84",e)}});break}}}(t)},null,8,["src","lazy-load","onClick"]),e.createElementVNode("text",{class:"z-10 absolute right-0 bottom-0 px-[8rpx] py-[4rpx] bg-white-1 text-black-1 text-xs rounded-xl"},e.toDisplayString(t.typeTitle),1)]))),128))],40,["autoplay"])])}}}),ye=e.defineComponent({__name:"Recommend",setup(t,{expose:l}){const r=G(),s=q();let c=[];const u=e.shallowRef(new Array(3).fill({})),d=e.shallowRef();e.watch(()=>s.profile,e=>{e?(y(!0),async function(){const{data:{dailySongs:e}}=await _.get(`/recommend/songs?timestamp=${Date.now()}`,{});n("log","at pages/index/components/Home/components/Recommend/Recommend.vue:118","🚀 ~ file: Recommend.vue:98 ~ fetchRecommendSongs ~ dailySongs:",e),d.value=e}()):(y(!1),d.value=void 0)},{immediate:!0});const m=12e4;let p,f=Date.now();a(()=>{p=setInterval(()=>{g(),f=Date.now()},m),c.length&&Date.now()-f>m&&(g(),f=Date.now())}),i(()=>{clearInterval(p)});const h=e.ref(!1);function g(){u.value=N(c).slice(0,3)}async function y(e){n("log","at pages/index/components/Home/components/Recommend/Recommend.vue:104","🎯 Recommend fetchRecommend 开始执行, isLogin:",e);try{const t=e?await _.get(`/recommend/resource?timestamp=${Date.now()}`,{}):await fe(20);n("log","at pages/index/components/Home/components/Recommend/Recommend.vue:107","🚀 ~ file: Recommend.vue:77 ~ fetchRecommend ~ data:",t),c=t.result||t.recommend,g()}catch(t){n("error","at pages/index/components/Home/components/Recommend/Recommend.vue:112","❌ Recommend fetchRecommend 失败:",t)}}return l({fetchRecommend:y}),(t,n)=>{const l=o(e.resolveDynamicComponent("JImage"),Q),a=o(e.resolveDynamicComponent("JIcon"),Z);return e.openBlock(),e.createElementBlock("view",{class:"w-auto h-[140rpx] mt-[50rpx] mx-auto rounded-[60rpx] flex items-center bg-black-1"},[e.createElementVNode("view",{class:"flex-1 relative flex justify-start h-full"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),(n,o)=>(e.openBlock(),e.createBlock(l,{key:o,class:e.normalizeClass([{"left-0":0===o,"x-mid z-10 !h-[120%]":1===o,"right-0":2===o},"absolute bottom-0 w-[180rpx] h-full"]),src:n.picUrl+"?param=100y100",width:"180rpx",height:"100%",radius:"8rpx",onClick:o=>("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/playlist/playlist?id=${n.id}`)},null,8,["class","src","onClick"]))),128))]),e.createElementVNode("view",{class:"text-yellow-1 flex-1 flex justify-evenly items-center mr-[10rpx]"},[e.createElementVNode("view",null,[e.createElementVNode("view",{class:"text-white-1 text-[38rpx] font-bold"}," MOO Radio "),e.createElementVNode("text",{class:"text-grey-1 text-[30rpx] tracking-[8rpx]"}," 个性好歌推荐 ")]),e.createVNode(a,{type:e.unref(h)?"icon-pause":"icon-play",class:"text-[80rpx] text-yellow-1",onClick:n[0]||(n[0]=t=>!e.unref(h)&&async function(){if(c.length){if(h.value=!0,d.value)r.onPlay("random"===r.mode?S(0,d.value.length):0,d.value);else{const{id:e}=u.value[S(0,u.value.length)],{playlist:t}=await pe(e);r.onPlay("random"===r.mode?S(0,t.tracks.length):0,t.tracks,t)}setTimeout(()=>{h.value=!1},1e3)}}())},null,8,["type"])])])}}}),ve=e.defineComponent({__name:"Songlist",props:{songlist:null},emits:["click"],setup:t=>(n,l)=>{const a=o(e.resolveDynamicComponent("JImage"),Q),i=o(e.resolveDynamicComponent("JIcon"),Z);return e.openBlock(),e.createElementBlock("view",{class:"animate-enter-content w-auto flex justify-between flex-wrap overflow-hidden"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.songlist,t=>(e.openBlock(),e.createElementBlock("view",{key:t.id,class:"animate-content w-[48%] h-[420rpx] mb-[20rpx] rounded-[20rpx] font-bold text-white-1 relative",onClick:e=>n.$emit("click",t)},[e.createVNode(a,{src:t.coverImgUrl+"?param=200y200",width:"100%",height:"322rpx",radius:"20rpx","lazy-load":""},null,8,["src"]),e.createVNode(i,{class:"icon-music text-grey-2 text-[42rpx] bg-white-1 p-[4rpx] rounded-[50%] !absolute right-[3%] top-[60%]"}),e.createElementVNode("text",{class:"line-clamp-2"},e.toDisplayString(t.name),1)],8,["onClick"]))),128))])}}),xe=e.defineComponent({__name:"NewSonglist",setup(t,{expose:l}){let i=[];const r=e.shallowRef(new Array(4).fill({}));function s(){r.value=N(i).slice(0,4)}async function c(){const{playlists:e}=await he(S(0,100),20);n("log","at pages/index/components/Home/components/NewSonglist/NewSonglist.vue:36","🚀 ~ file: NewSonglist.vue:17 ~ fetchNewSonglist ~ playlists:",e),i=e,s()}return a(()=>{i.length&&s()}),c(),l({fetchNewSonglist:c}),(t,n)=>{const l=o(e.resolveDynamicComponent("Subtitle"),le),a=o(e.resolveDynamicComponent("Songlist"),ve);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(l,{title:"MOO Songlist_歌单",clickable:"",url:"./songlist/songlist"}),e.createVNode(a,{songlist:e.unref(r),onClick:n[0]||(n[0]=n=>{("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/playlist/playlist?id=${n.id}`)})},null,8,["songlist"])],64)}}}),ke=e.defineComponent({__name:"NewSong",setup(t){const l=G(),a=e.shallowRef(),i=e.shallowReactive([]);return async function(){const{result:e}=await _.get("/personalized/newsong");n("log","at pages/index/components/Home/components/NewSong/NewSong.vue:32","🚀 ~ file: NewSong.vue:48 ~ fetchNewSong ~ result:",e),i.push(...e.map(({song:e})=>({id:e.id,name:e.name,ar:e.artists,al:e.album})));const{result:[{id:t}]}=await fe(1),{playlist:o}=await pe(t);a.value=o}(),(t,n)=>{const r=o(e.resolveDynamicComponent("Subtitle"),le),s=o(e.resolveDynamicComponent("Song"),ie);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(r,{title:"MOO Track_新歌",clickable:"",onTitle:n[0]||(n[0]=n=>{var o;return(null==(o=e.unref(a))?void 0:o.id)&&("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/playlist/playlist?id=${e.unref(a).id}`)})}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).slice(0,4),(t,n)=>{var o,r,c,u;return e.openBlock(),e.createBlock(s,{key:t.id,song:t,"is-play":(null==(o=e.unref(l).currentSongInfo)?void 0:o.song.id)===t.id&&e.unref(l).isPlay,"is-run":(null==(r=e.unref(l).currentSongInfo)?void 0:r.song.id)===t.id,"cannot-play":(null==(c=e.unref(l).currentSongInfo)?void 0:c.song.id)===t.id&&!(null==(u=e.unref(l).currentSongInfo)?void 0:u.urlInfo.url),onClick:t=>e.unref(l).onPlay(n,e.unref(i),e.unref(a))},null,8,["song","is-play","is-run","cannot-play","onClick"])}),128))],64)}}}),we=e.defineComponent({__name:"Album",props:{album:null},emits:["click"],setup:t=>(n,l)=>{const a=o(e.resolveDynamicComponent("JImage"),Q);return e.openBlock(),e.createElementBlock("view",{class:"flex items-stretch mb-5",onClick:l[1]||(l[1]=e=>n.$emit("click"))},[e.createElementVNode("view",{class:"flex-1 flex items-center mr-[50rpx]"},[e.createVNode(a,{src:t.album.picUrl+"?param=200y200",width:"300rpx",height:"300rpx",radius:"12rpx","lazy-load":""},null,8,["src"]),e.createVNode(a,{src:"/static/cd.png",width:"50rpx",height:"200rpx","lazy-load":""})]),e.createElementVNode("view",{class:"flex-1 flex flex-col justify-evenly items-start"},[e.createElementVNode("text",{class:"text-[38rpx] font-bold text-white-1 line-clamp-2"},e.toDisplayString(t.album.name),1),e.createElementVNode("text",{class:"text-[32rpx] text-grey-1 active:text-white-1",onClick:l[0]||(l[0]=e.withModifiers(o=>("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))(`/sharedPages/artist/artist?id=${t.album.artist.id}`),["stop"]))},e.toDisplayString(t.album.artist.name),1),e.createElementVNode("text",{class:"inline-block px-4 py-1 text-[13px] text-black-1 font-bold bg-yellow-1 rounded-full m-0"}," Hot ")])])}}),be=e.defineComponent({__name:"NewAlbum",setup(t){const l=e.shallowRef([]);return async function(){const{albums:e}=await _.get("/album/newest");n("log","at pages/index/components/Home/components/NewAlbum/NewAlbum.vue:26","🚀 ~ file: NewAlbum.vue:47 ~ getNewAlbum ~ albums:",e),l.value=e}(),(t,n)=>{const a=o(e.resolveDynamicComponent("Subtitle"),le),i=o(e.resolveDynamicComponent("Album"),we);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(a,{title:"MOO Album_专辑",clickable:"",url:"./albumList/albumList"}),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l).slice(0,3),n=>(e.openBlock(),e.createBlock(i,{key:n.id,album:n,onClick:o=>("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/album/album?id=${n.id}`)},null,8,["album","onClick"]))),128))],64)}}}),_e=e.defineComponent({__name:"SearchTags",setup(t){const n=["流行音乐奖","Contemporary R&B","朋友圈","新城劲爆颁奖礼","千禧曼波","新城国语力颁奖礼","太能说了","New Wave","活下去"];return(t,l)=>{const a=o(e.resolveDynamicComponent("Subtitle"),le);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(a,{title:"MOO Tag_探索标签",clickable:"",icon:"icon-fresh"}),(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(n,n=>e.createElementVNode("button",{key:n,size:"mini",class:"font-bold bg-yellow-1 text-black-1 rounded-full mr-[20rpx] mb-[20rpx]",onClick:o=>("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/searchSongs/searchSongs?keyword=${n}`)}," #"+e.toDisplayString(n),9,["onClick"])),64))],64)}}}),Ce=e.defineComponent({__name:"Home",setup:t=>(t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"box-border overflow-y-scroll h-full px-[28rpx] pb-[var(--save-bottom)]"},[e.createVNode(ge),e.createVNode(ye),e.createVNode(xe),e.createVNode(ke),e.createVNode(be),e.createVNode(_e)]))}),Se=e.defineComponent({__name:"Shelf",props:{description:null,count:null,icon:null,list:null,url:null},emits:["click"],setup(t,{emit:l}){const a=t;function i(){l("click"),a.url&&uni.navigateTo({url:a.url,fail:e=>{n("error","at pages/index/components/Profile/components/Shelf/Shelf.vue:68",e)}})}return(n,l)=>{const a=o(e.resolveDynamicComponent("JImage"),Q),r=o(e.resolveDynamicComponent("JIcon"),Z);return e.openBlock(),e.createElementBlock("view",{class:"w-[330rpx] h-[220rpx] relative",onClick:i},[e.createElementVNode("view",{class:"relative flex items-end w-[88%] h-[60%] mx-auto"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.list,(n,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:o},[n?(e.openBlock(),e.createBlock(a,{key:0,src:n+"?param=100y100",class:e.normalizeClass(["!absolute !w-[50%] h-full",{"left-0 z-[3]":0===o,"h-[90%] left-1/2 -translate-x-1/2 z-[2]":1===o,"h-[90%] left-full -translate-x-full z-[1]":2===o}]),width:"100%",height:"100%","lazy-load":""},null,8,["src","class"])):(e.openBlock(),e.createElementBlock("view",{key:1,class:e.normalizeClass(["absolute w-[50%] h-full bg-grey-1 shadow-[4rpx_0_6rpx_#666]",{"left-0 z-[3]":0===o,"h-[90%] left-1/2 -translate-x-1/2 z-[2]":1===o,"h-[90%] left-full -translate-x-full z-[1]":2===o}])},[0===o?(e.openBlock(),e.createBlock(r,{key:0,type:"icon-"+t.icon,class:"text-white-1 text-[80rpx] mid"},null,8,["type"])):e.createCommentVNode("v-if",!0)],2))],64))),128))]),e.createElementVNode("view",{class:"w-full rounded-[20rpx] py-[12rpx] px-[20rpx] box-border bg-black-1 flex justify-between items-center font-bold"},[e.createElementVNode("text",{class:"text-white-1"},e.toDisplayString(t.description),1),e.createElementVNode("text",{class:"text-grey-1"},e.toDisplayString(t.count),1)])])}}}),Ne=J("cache",()=>{const t=G(),o=X("historySearch",e.shallowReactive([])),l=X("historyPlays",e.shallowReactive([])),a=X("collectSongs",e.shallowReactive([])),i=X("collectPlaylist",e.shallowReactive([])),r=X("collectAlbums",e.shallowReactive([])),s=X("collectArtists",e.shallowReactive([]));return e.watch(()=>t.currentSongInfo,e=>{if(n("log","at store/cache.ts:28","🚀 ~ file: cache.ts:51 ~ watch ~ songInfo:","添加历史播放歌曲"),!e)return;const{song:t}=e,o=l.findIndex(e=>e.id===t.id);-1===o?l.unshift(t):l.unshift(...l.splice(o,1)),l.length>50&&(l.length=50)}),{historySearch:o,historyPlays:l,collectSongs:a,collectPlaylist:i,collectAlbums:r,collectArtists:s,addHistorySearch:function(e){const t=o.findIndex(t=>t===e);-1===t?o.unshift(e):o.unshift(...o.splice(t,1)),o.length>10&&(o.length=10)}}}),Be=e.defineComponent({__name:"Profile",setup(t){const l=q(),a=Ne(),i=["","",""],r=e.shallowReactive([]);e.watch(()=>l.profile,async e=>{if(null==e?void 0:e.userId){const{playlist:t}=await O(e.userId,0,2);n("log","at pages/index/components/Profile/Profile.vue:85","🚀 ~ file: Profile.vue:81 ~ getUserPlaylist:",t),r.push(...t)}},{immediate:!0});const s=e.reactive([{description:"网易云歌单",count:e.computed(()=>{var e;return(null==(e=l.subcount)?void 0:e.createdPlaylistCount)||0}),icon:"playlist",list:e.computed(()=>i.map((e,t)=>{var n;return(null==(n=r[t])?void 0:n.coverImgUrl)||e})),url:"./neteasePlaylist/neteasePlaylist"},{description:"收藏音乐",count:e.computed(()=>a.collectSongs.length),icon:"heart",list:e.computed(()=>i.map((e,t)=>{var n;return(null==(n=a.collectSongs[t])?void 0:n.al.picUrl)||e})),url:"./collectSongs/collectSongs"},{description:"收藏歌单",count:e.computed(()=>a.collectPlaylist.length),icon:"playlist",list:e.computed(()=>i.map((e,t)=>{var n;return(null==(n=a.collectPlaylist[t])?void 0:n.coverImgUrl)||e})),url:"./collectPlaylist/collectPlaylist"},{description:"收藏专辑",count:e.computed(()=>a.collectAlbums.length),icon:"album",list:e.computed(()=>i.map((e,t)=>{var n;return(null==(n=a.collectAlbums[t])?void 0:n.picUrl)||e})),url:"./collectAlbums/collectAlbums"},{description:"收藏歌手",count:e.computed(()=>a.collectArtists.length),icon:"singer",list:e.computed(()=>i.map((e,t)=>{var n;return(null==(n=a.collectArtists[t])?void 0:n.avatar)||e})),url:"./collectArtists/collectArtists"},{description:"最近播放",count:e.computed(()=>a.historyPlays.length),icon:"time",list:e.computed(()=>i.map((e,t)=>{var n;return(null==(n=a.historyPlays[t])?void 0:n.al.picUrl)||e})),url:"./historyPlays/historyPlays"}]);async function c(){b.start(),await l.logout(),b.close()}return(t,n)=>{var a;const i=o(e.resolveDynamicComponent("JImage"),Q),r=o(e.resolveDynamicComponent("JIcon"),Z);return e.openBlock(),e.createElementBlock("view",{class:"w-full h-full box-border px-[28rpx] pb-[var(--save-bottom)] overflow-y-scroll"},[e.createElementVNode("view",{class:"h-[300rpx] p-[30rpx] rounded-[20rpx] bg-black-1 text-[38rpx] box-border flex flex-col justify-between font-bold"},[e.createElementVNode("view",{class:"flex items-center text-white-1"},[e.unref(l).profile?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(i,{src:e.unref(l).profile.avatarUrl,width:"75rpx",height:"75rpx",radius:"50%",class:"mr-3"},null,8,["src"]),e.createElementVNode("text",null,e.toDisplayString(e.unref(l).profile.nickname),1)],64)):(e.openBlock(),e.createElementBlock("view",{key:1,class:"flex items-center text-base",onClick:n[0]||(n[0]=n=>("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))("/sharedPages/login/login"))},[e.createVNode(r,{type:"icon-user",class:"text-white-1 text-[60rpx] mr-3"}),e.createTextVNode(" 登录网易云音乐 ")]))]),e.createElementVNode("view",{class:"flex justify-between items-center text-grey-1"},[e.createElementVNode("view",{class:"flex-1"},[e.createElementVNode("text",null,"关注"),e.createElementVNode("text",null,"0")]),e.createElementVNode("view",{class:"flex-1"},[e.createElementVNode("text",null,"粉丝"),e.createElementVNode("text",null,"0")]),(null==(a=e.unref(l).profile)?void 0:a.vipType)?(e.openBlock(),e.createElementBlock("view",{key:0,class:"w-[100rpx] h-[50rpx] leading-[50rpx] text-center text-[28rpx] font-bold bg-yellow-1 text-black-1 rounded-full"}," VIP ")):e.createCommentVNode("v-if",!0)])]),e.createElementVNode("view",{class:"flex flex-wrap justify-around items-center mt-5"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s),(t,n)=>(e.openBlock(),e.createBlock(Se,{key:n,description:t.description,count:t.count,icon:t.icon,list:t.list,url:t.url},null,8,["description","count","icon","list","url"]))),128))]),e.unref(l).profile?(e.openBlock(),e.createElementBlock("button",{key:0,class:"bg-black-1 text-white-1 rounded-full mt-10 mx-10",onClick:c}," 退出登录 ")):e.createCommentVNode("v-if",!0)])}}}),Ve=e.defineComponent({__name:"VirtualSwiper",props:{activeClass:null,changingClass:{type:Boolean},autoplay:{type:Boolean},currentItemId:null,interval:null,duration:null,circular:{type:Boolean},vertical:{type:Boolean},previousMargin:null,nextMargin:null,acceleration:{type:Boolean},disableProgrammaticAnimation:{type:Boolean},displayMultipleItems:null,skipHiddenItemLayout:{type:Boolean},disableTouch:{type:Boolean},touchable:{type:Boolean},easingFunction:null,current:null,currentData:null,data:null},emits:["transition","animationfinish","change","previous","next"],setup(t,{expose:n,emit:o}){const l=t,a=e.ref(l.currentData||0),i=e.ref(l.current||1),r=e.reactive([]);function s({detail:{current:e,source:t}}){if(!t)return;const n=i.value,r=a.value;if(n-e===-1||n-e===2){const t=a.value=m(r+1,l.data.length);o("next",e,t),o("change",e,t),u(e,t)}else{const t=a.value=m(r-1,l.data.length);o("previous",e,t),o("change",e,t),d(e,t)}}function c(t=i.value){l.data.length&&e.nextTick(()=>{const{currentData:e=0,data:n}=l;r[m(t-1,3)]=n[m(e-1,n.length)],r[m(t,3)]=n[e],r[m(t+1,3)]=n[m(e+1,n.length)]})}function u(t=m(i.value+1,3),n=m(a.value+1,l.data.length)){t!==i.value&&(i.value=t,a.value=n,e.nextTick(()=>{const e=m(t+1,3),o=m(n+1,l.data.length);r[e]=l.data[o]}))}function d(t=m(i.value-1,3),n=m(a.value-1,l.data.length)){t!==i.value&&(i.value=t,a.value=n,e.nextTick(()=>{const e=m(t-1,3),o=m(n-1,l.data.length);r[e]=l.data[o]}))}function m(e,t){return e<0?t-1:e%t}return e.watch([()=>l.data,()=>l.data.length],()=>{c()},{immediate:!0}),e.watch(()=>l.currentData,(e=0,t=0)=>{a.value=e,l.data[e].id!==r[i.value].id&&(i.value=m(e>t?i.value+1:i.value-1,3),c())},{flush:"post"}),n({view:i,playViews:r,initViews:c,updateNextView:u,updatePrevView:d}),(t,n)=>(e.openBlock(),e.createElementBlock("swiper",{"active-class":t.$props.activeClass,"changing-class":t.$props.changingClass,autoplay:t.$props.autoplay,"current-item-id":t.$props.currentItemId,interval:t.$props.interval,duration:t.$props.duration,circular:t.$props.circular,vertical:t.$props.vertical,"previous-margin":t.$props.previousMargin,"next-margin":t.$props.nextMargin,acceleration:t.$props.acceleration,"disable-programmatic-animation":t.$props.disableProgrammaticAnimation,"display-multiple-items":t.$props.displayMultipleItems,"skip-hidden-item-layout":t.$props.skipHiddenItemLayout,"disable-touch":t.$props.disableTouch,touchable:t.$props.touchable,"easing-function":t.$props.easingFunction,current:e.unref(i),onChange:s,onAnimationfinish:n[0]||(n[0]=e=>o("animationfinish",e)),onTransition:n[1]||(n[1]=e=>o("transition",e))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(n,o)=>(e.openBlock(),e.createElementBlock("swiper-item",{key:o},[e.renderSlot(t.$slots,"default",{item:n}),e.unref(i)===o?e.renderSlot(t.$slots,"current",{key:0,item:n}):e.createCommentVNode("v-if",!0)]))),128))],40,["active-class","changing-class","autoplay","current-item-id","interval","duration","circular","vertical","previous-margin","next-margin","acceleration","disable-programmatic-animation","display-multiple-items","skip-hidden-item-layout","disable-touch","touchable","easing-function","current"]))}}),Ee=e.defineComponent({__name:"index",setup(t){const n=["home","profile"],l=e.ref("home"),a=e.computed(()=>!1);return(t,i)=>{const r=o(e.resolveDynamicComponent("Navbar"),h),s=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("view",{class:"h-full bg-black-2 flex flex-col justify-stretch overflow-hidden"},[e.createVNode(r,{class:e.normalizeClass({invisible:e.unref(a)})},null,8,["class"]),e.createVNode(ue,{class:e.normalizeClass({invisible:e.unref(a)}),pages:n,"current-page":e.unref(l)},null,8,["class","current-page"]),e.createVNode(me,{class:e.normalizeClass({invisible:e.unref(a)})},null,8,["class"]),e.createCommentVNode(" * 解决小程序真机上swiper使用flex-grow无效的问题 "),e.createElementVNode("view",{class:"bg-black-2 grow relative"},[e.createElementVNode("swiper",{class:"!h-full absolute top-0 left-0 right-0 bottom-0","skip-hidden-item-layout":"",current:e.unref(0),duration:200,onChange:i[0]||(i[0]=({detail:{current:e}})=>l.value=n[e])},[e.createElementVNode("swiper-item",null,[e.createVNode(Ce)]),e.createElementVNode("swiper-item",null,[e.createVNode(Be)])],40,["current"])])]),e.createVNode(s,{class:e.normalizeClass({invisible:e.unref(a)})},null,8,["class"])],64)}}});function Pe(){const t=e.ref(0);return uni.getSystemInfo({success({statusBarHeight:e}){t.value=e||0}}),t}const De=e.defineComponent({__name:"neteasePlaylist",setup(t){const l=q(),a=e.shallowReactive([]);async function i(){var e;if(!(null==(e=l.profile)?void 0:e.userId))return;const{playlist:t}=await O(l.profile.userId,a.length,8);n("log","at pages/index/neteasePlaylist/neteasePlaylist.vue:76","🚀 ~ file: Profile.vue:81 ~ watch ~ playlist:",t),a.push(...t)}return i(),c(()=>{a.length>=l.subcount.createdPlaylistCount||i()}),(t,n)=>{const i=o(e.resolveDynamicComponent("Navbar"),h),r=o(e.resolveDynamicComponent("Subtitle"),le),s=o(e.resolveDynamicComponent("JImage"),Q),c=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(i,{title:"🎵 网易云歌单","left-arrow":""}),e.createVNode(r,{icon:"icon-more",class:"z-50 fixed left-0 right-0 bg-black-2 px-[28rpx] !my-0",style:e.normalizeStyle({top:44+("useStatusBarHeight"in t?t.useStatusBarHeight:e.unref(Pe))().value+"px"})},{title:e.withCtx(()=>{var t;return[e.createElementVNode("view",{class:"w-[120rpx] h-[60rpx] leading-[60rpx] rounded-full bg-yellow-1 text-black-1 text-[34rpx] text-center"},e.toDisplayString(null==(t=e.unref(l).subcount)?void 0:t.createdPlaylistCount),1)]}),_:1},8,["style"]),e.createElementVNode("view",{class:"animate-enter-content bg-black-2 px-[28rpx] mt-[106rpx] after:block after:pb-[var(--save-bottom)]"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),n=>(e.openBlock(),e.createElementBlock("view",{key:n.id,class:"animate-content flex items-center h-[200rpx] mb-5",onClick:o=>("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/playlist/playlist?id=${n.id}`)},[e.createVNode(s,{src:n.coverImgUrl+"?param=200y200",width:"200rpx",height:"200rpx",radius:"16rpx","lazy-load":""},null,8,["src"]),e.createElementVNode("view",{class:"ml-5 h-full flex flex-col justify-evenly text-bold"},[e.createElementVNode("view",{class:"w-[450rpx] line-clamp-2 text-[36rpx] text-white-1"},e.toDisplayString(n.name),1),e.createElementVNode("view",{class:"w-[450rpx] text-[34rpx] text-grey-1"},e.toDisplayString(n.creator.nickname),1)])],8,["onClick"]))),128))]),e.createVNode(c)],64)}}}),Ie=e.defineComponent({__name:"songlist",setup(t){const l=e.shallowReactive([]);let a=0;async function i(){const{playlists:e,total:t}=await he(l.length,20);n("log","at pages/index/songlist/songlist.vue:40","🚀 ~ file: songlist.vue:41 ~ fetchSonglist ~ playlists:",e,t),a=t,l.push(...e)}return i(),c(()=>{l.length!==a&&i()}),(t,n)=>{const a=o(e.resolveDynamicComponent("Navbar"),h),i=o(e.resolveDynamicComponent("Songlist",!0),ve),r=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(a,{title:"🎵 歌单列表","left-arrow":""}),e.unref(l).length?(e.openBlock(),e.createBlock(i,{key:0,songlist:e.unref(l),class:"min-h-full bg-black-2 px-[28rpx]",onClick:n[0]||(n[0]=n=>{("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/playlist/playlist?id=${n.id}`)})},null,8,["songlist"])):e.createCommentVNode("v-if",!0),e.createVNode(r)],64)}}});const ze=e.defineComponent({__name:"albumList",setup(t){let l=0;const a=e.shallowReactive([]);async function i(){const{albums:e,total:t}=await function(e="ALL",t=0,n=20){return _.get(`/album/new?area=${e}&offset=${t}&limit=${n}`)}("ALL",a.length,20);n("log","at pages/index/albumList/albumList.vue:49","🚀 ~ file: albumList.vue:60 ~ fetchAlbumList ~ albums:",e,t),a.push(...e),l=t}return i(),c(()=>{a.length!==l&&i()}),(t,n)=>{const l=o(e.resolveDynamicComponent("Navbar"),h),i=o(e.resolveDynamicComponent("Album"),we),r=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(l,{title:"🎵 专辑列表","left-arrow":""}),e.createElementVNode("view",{class:"animate-enter-content box-border overflow-x-hidden px-[28rpx] after:block after:pb-[var(--save-bottom)]"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),n=>(e.openBlock(),e.createElementBlock("view",{key:n.id,class:"animate-content"},[e.createElementVNode("text",{class:"inline-block text-grey-1 text-[30rpx] font-bold mb-2"}," 更新于 "+e.toDisplayString(e.unref(V)(n.publishTime,"{y}-{m}-{d}")),1),e.createVNode(i,{album:n,onClick:o=>("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/album/album?id=${n.id}`)},null,8,["album","onClick"])]))),128))]),e.createVNode(r)],64)}}});let Ae={};Ae={data:()=>({is_show:"none"}),watch:{show(e){this.is_show=this.show}},created(){this.swipeaction=this.getSwipeAction(),this.swipeaction&&Array.isArray(this.swipeaction.children)&&this.swipeaction.children.push(this)},mounted(){this.is_show=this.show},methods:{closeSwipe(e){this.autoClose&&this.swipeaction&&this.swipeaction.closeOther(this)},change(e){this.$emit("change",e.open),this.is_show!==e.open&&(this.is_show=e.open)},appTouchStart(e){const{clientX:t}=e.changedTouches[0];this.clientX=t,this.timestamp=(new Date).getTime()},appTouchEnd(e,t,n,o){const{clientX:l}=e.changedTouches[0];let a=Math.abs(this.clientX-l),i=(new Date).getTime()-this.timestamp;a<40&&i<300&&this.$emit("click",{content:n,index:t,position:o})},onClickForPC(e,t,n){}}};const Te=e=>{(e.$wxs||(e.$wxs=[])).push("wxsswipe"),(e.$wxsModules||(e.$wxsModules={})).wxsswipe="afd46426"},$e=e=>{(e.$renderjs||(e.$renderjs=[])).push("renderswipe"),(e.$renderjsModules||(e.$renderjsModules={})).renderswipe="5a1e922e"},Re={mixins:[Ae,{},{}],emits:["click","change"],props:{show:{type:String,default:"none"},disabled:{type:Boolean,default:!1},autoClose:{type:Boolean,default:!0},threshold:{type:Number,default:20},leftOptions:{type:Array,default:()=>[]},rightOptions:{type:Array,default:()=>[]}},unmounted(){this.__isUnmounted=!0,this.uninstall()},methods:{uninstall(){this.swipeaction&&this.swipeaction.children.forEach((e,t)=>{e===this&&this.swipeaction.children.splice(t,1)})},getSwipeAction(e="uniSwipeAction"){let t=this.$parent,n=t.$options.name;for(;n!==e;){if(t=t.$parent,!t)return!1;n=t.$options.name}return t}}};Te(Re),$e(Re);const Fe=d(Re,[["render",function(t,n,o,l,a,i){return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createCommentVNode(" 在微信小程序 app vue端 h5 使用wxs 实现"),e.createElementVNode("view",{class:"uni-swipe"},[e.createElementVNode("view",{class:"uni-swipe_box","change:prop":t.wxsswipe.showWatch,prop:e.wp(t.is_show),"data-threshold":o.threshold,"data-disabled":o.disabled,onTouchstart:n[2]||(n[2]=(...e)=>t.wxsswipe.touchstart&&t.wxsswipe.touchstart(...e)),onTouchmove:n[3]||(n[3]=(...e)=>t.wxsswipe.touchmove&&t.wxsswipe.touchmove(...e)),onTouchend:n[4]||(n[4]=(...e)=>t.wxsswipe.touchend&&t.wxsswipe.touchend(...e))},[e.createCommentVNode(" 在微信小程序 app vue端 h5 使用wxs 实现"),e.createElementVNode("view",{class:"uni-swipe_button-group button-group--left"},[e.renderSlot(t.$slots,"left",{},()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.leftOptions,(o,l)=>(e.openBlock(),e.createElementBlock("view",{key:l,style:e.normalizeStyle({backgroundColor:o.style&&o.style.backgroundColor?o.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:n[0]||(n[0]=(...e)=>t.appTouchStart&&t.appTouchStart(...e)),onTouchend:e=>t.appTouchEnd(e,l,o,"left"),onClick:e.withModifiers(e=>t.onClickForPC(l,o,"left"),["stop"])},[e.createElementVNode("text",{class:"uni-swipe_button-text",style:e.normalizeStyle({color:o.style&&o.style.color?o.style.color:"#FFFFFF",fontSize:o.style&&o.style.fontSize?o.style.fontSize:"16px"})},e.toDisplayString(o.text),5)],44,["onTouchend","onClick"]))),128))],!0)]),e.createElementVNode("view",{class:"uni-swipe_text--center"},[e.renderSlot(t.$slots,"default",{},void 0,!0)]),e.createElementVNode("view",{class:"uni-swipe_button-group button-group--right"},[e.renderSlot(t.$slots,"right",{},()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.rightOptions,(o,l)=>(e.openBlock(),e.createElementBlock("view",{key:l,style:e.normalizeStyle({backgroundColor:o.style&&o.style.backgroundColor?o.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:n[1]||(n[1]=(...e)=>t.appTouchStart&&t.appTouchStart(...e)),onTouchend:e=>t.appTouchEnd(e,l,o,"right"),onClick:e.withModifiers(e=>t.onClickForPC(l,o,"right"),["stop"])},[e.createElementVNode("text",{class:"uni-swipe_button-text",style:e.normalizeStyle({color:o.style&&o.style.color?o.style.color:"#FFFFFF",fontSize:o.style&&o.style.fontSize?o.style.fontSize:"16px"})},e.toDisplayString(o.text),5)],44,["onTouchend","onClick"]))),128))],!0)])],40,["change:prop","prop","data-threshold","data-disabled"])]),e.createCommentVNode(" app nvue端 使用 bindingx "),e.createCommentVNode(" 其他平台使用 js ，长列表性能可能会有影响")],2112)}],["__scopeId","data-v-a5403dbf"]]);const Le=d({name:"uniSwipeAction",data:()=>({}),created(){this.children=[]},methods:{resize(){},closeAll(){this.children.forEach(e=>{e.is_show="none"})},closeOther(e){this.openItem&&this.openItem!==e&&(this.openItem.is_show="none"),this.openItem=e}}},[["render",function(t,n,o,l,a,i){return e.openBlock(),e.createElementBlock("view",null,[e.renderSlot(t.$slots,"default")])}]]),Me=e.defineComponent({__name:"collectSongs",setup(t){const n=G(),l=Ne(),a=e.ref(10),i=e.computed(()=>l.collectSongs.slice(0,a.value));return c(()=>{i.value.length<l.collectSongs.length&&(a.value+=10)}),(t,a)=>{const r=o(e.resolveDynamicComponent("Navbar"),h),s=o(e.resolveDynamicComponent("JIcon"),Z),c=o(e.resolveDynamicComponent("Subtitle"),le),u=o(e.resolveDynamicComponent("Song"),ie),d=o(e.resolveDynamicComponent("uni-swipe-action-item"),Fe),m=o(e.resolveDynamicComponent("uni-swipe-action"),Le),p=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(r,{title:"🎵 收藏音乐","left-arrow":""}),e.createVNode(c,{icon:"icon-menu","icon-size":"60rpx",class:"z-50 fixed left-0 right-0 bg-black-2 px-[28rpx] !my-0",style:e.normalizeStyle({top:44+("useStatusBarHeight"in t?t.useStatusBarHeight:e.unref(Pe))().value+"px"})},{title:e.withCtx(()=>[e.createElementVNode("view",{class:"flex items-center"},[e.createElementVNode("button",{class:"h-[64rpx] !leading-[64rpx] m-0 rounded-full bg-yellow-1 text-black-1",size:"mini",onClick:a[0]||(a[0]=t=>e.unref(n).onPlay("random"===e.unref(n).mode?e.unref(S)(0,e.unref(l).collectSongs.length):0,e.unref(l).collectSongs))},[e.createVNode(s,{class:"icon-play text-[42rpx]"})]),e.createElementVNode("text",{class:"text-grey-1 inline-block align-middle ml-5 font-[38rpx]"},e.toDisplayString(e.unref(l).collectSongs.length),1)])]),_:1},8,["style"]),e.createElementVNode("view",{class:"bg-black-2 px-[28rpx] mt-[106rpx] after:block after:pb-[var(--save-bottom)]"},[e.createVNode(m,{class:"animate-enter-content"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i),(t,o)=>(e.openBlock(),e.createBlock(d,{key:t.id,class:"animate-content","auto-close":!1},{right:e.withCtx(()=>[e.createElementVNode("view",{class:"bg-red-1 ml-1 w-[120rpx] h-[140rpx] leading-[140rpx] text-white-1 text-[30rpx] text-center",onClick:t=>e.unref(l).collectSongs.splice(o,1)}," 删除 ",8,["onClick"])]),default:e.withCtx(()=>{var a,i,r,s;return[e.createVNode(u,{song:t,"is-play":(null==(a=e.unref(n).currentSongInfo)?void 0:a.song.id)===t.id&&e.unref(n).isPlay,"is-run":(null==(i=e.unref(n).currentSongInfo)?void 0:i.song.id)===t.id,"cannot-play":(null==(r=e.unref(n).currentSongInfo)?void 0:r.song.id)===t.id&&!(null==(s=e.unref(n).currentSongInfo)?void 0:s.urlInfo.url),onClick:t=>e.unref(n).onPlay(o,e.unref(l).collectSongs)},null,8,["song","is-play","is-run","cannot-play","onClick"])]}),_:2},1024))),128))]),_:1})]),e.createVNode(p)],64)}}}),je=e.defineComponent({__name:"collectPlaylist",setup(t){const n=Ne(),l=e.ref(10),a=e.computed(()=>n.collectPlaylist.slice(0,l.value));return c(()=>{a.value.length<n.collectPlaylist.length&&(l.value+=8)}),(t,l)=>{const i=o(e.resolveDynamicComponent("Navbar"),h),r=o(e.resolveDynamicComponent("Subtitle"),le),s=o(e.resolveDynamicComponent("JImage"),Q),c=o(e.resolveDynamicComponent("uni-swipe-action-item"),Fe),u=o(e.resolveDynamicComponent("uni-swipe-action"),Le),d=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(i,{title:"🎵 收藏歌单","left-arrow":""}),e.createVNode(r,{icon:"icon-more",class:"z-50 fixed left-0 right-0 bg-black-2 px-[28rpx] !my-0",style:e.normalizeStyle({top:44+("useStatusBarHeight"in t?t.useStatusBarHeight:e.unref(Pe))().value+"px"})},{title:e.withCtx(()=>[e.createElementVNode("view",{class:"w-[120rpx] h-[60rpx] leading-[60rpx] rounded-full bg-yellow-1 text-black-1 text-[34rpx] text-center"},e.toDisplayString(e.unref(n).collectPlaylist.length),1)]),_:1},8,["style"]),e.createElementVNode("view",{class:"bg-black-2 px-[28rpx] mt-[106rpx] after:block after:pb-[var(--save-bottom)]"},[e.createVNode(u,{class:"animate-enter-content"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(o,l)=>(e.openBlock(),e.createBlock(c,{key:o.id,class:"animate-content","auto-close":!1},{right:e.withCtx(()=>[e.createElementVNode("view",{class:"bg-red-1 ml-1 w-[120rpx] h-[200rpx] leading-[200rpx] text-white-1 text-[30rpx] text-center",onClick:t=>e.unref(n).collectPlaylist.splice(l,1)}," 删除 ",8,["onClick"])]),default:e.withCtx(()=>[e.createElementVNode("view",{class:"flex items-center h-[200rpx] mb-5",onClick:n=>("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/playlist/playlist?id=${o.id}`)},[e.createVNode(s,{src:o.coverImgUrl+"?param=200y200",width:"200rpx",height:"200rpx",radius:"16rpx","lazy-load":""},null,8,["src"]),e.createElementVNode("view",{class:"ml-5 h-full flex flex-col justify-evenly text-bold"},[e.createElementVNode("view",{class:"w-[450rpx] line-clamp-2 text-[36rpx] text-white-1"},e.toDisplayString(o.name),1),e.createElementVNode("view",{class:"w-[450rpx] text-[34rpx] text-grey-1"},e.toDisplayString(o.creator.nickname),1)])],8,["onClick"])]),_:2},1024))),128))]),_:1})]),e.createVNode(d)],64)}}}),He=e.defineComponent({__name:"collectAlbums",setup(t){const n=Ne(),l=e.ref(10),a=e.computed(()=>n.collectAlbums.slice(0,l.value));return c(()=>{a.value.length<n.collectAlbums.length&&(l.value+=5)}),(t,l)=>{const i=o(e.resolveDynamicComponent("Navbar"),h),r=o(e.resolveDynamicComponent("Subtitle"),le),s=o(e.resolveDynamicComponent("Album"),we),c=o(e.resolveDynamicComponent("uni-swipe-action-item"),Fe),u=o(e.resolveDynamicComponent("uni-swipe-action"),Le),d=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(i,{title:"🎵 收藏专辑","left-arrow":""}),e.createVNode(r,{icon:"icon-more",class:"z-50 fixed left-0 right-0 bg-black-2 px-[28rpx] !my-0",style:e.normalizeStyle({top:44+("useStatusBarHeight"in t?t.useStatusBarHeight:e.unref(Pe))().value+"px"})},{title:e.withCtx(()=>[e.createElementVNode("view",{class:"w-[120rpx] h-[60rpx] leading-[60rpx] rounded-full bg-yellow-1 text-black-1 text-[34rpx] text-center"},e.toDisplayString(e.unref(n).collectAlbums.length),1)]),_:1},8,["style"]),e.createElementVNode("view",{class:"bg-black-2 px-[28rpx] mt-[106rpx] after:block after:pb-[var(--save-bottom)]"},[e.createVNode(u,{class:"animate-enter-content"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(o,l)=>(e.openBlock(),e.createBlock(c,{key:o.id,class:"animate-content","auto-close":!1},{right:e.withCtx(()=>[e.createElementVNode("view",{class:"bg-red-1 ml-1 w-[120rpx] h-[300rpx] leading-[300rpx] text-white-1 text-[30rpx] text-center",onClick:t=>e.unref(n).collectAlbums.splice(l,1)}," 删除 ",8,["onClick"])]),default:e.withCtx(()=>[e.createVNode(s,{album:o,onClick:n=>("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/album/album?id=${o.id}`)},null,8,["album","onClick"])]),_:2},1024))),128))]),_:1})]),e.createVNode(d)],64)}}}),Ue=e.defineComponent({__name:"Artist",props:{artist:null},emits:["click"],setup:t=>(n,l)=>{const a=o(e.resolveDynamicComponent("JImage"),Q);return e.openBlock(),e.createElementBlock("view",{class:"flex items-center mb-5",onClick:l[0]||(l[0]=e=>n.$emit("click"))},[e.createVNode(a,{class:"mr-5",src:(t.artist.picUrl||t.artist.avatar)+"?param=100y100",width:"140rpx",height:"140rpx",radius:"50%"},null,8,["src"]),e.createElementVNode("view",{class:"flex-1 flex flex-col justify-around h-full"},[e.createElementVNode("text",{class:"w-[420rpx] text-[38rpx] font-bold truncate text-white-1"},e.toDisplayString(t.artist.name),1),e.createElementVNode("view",{class:"w-[420rpx] space-x-1 text-[26rpx] truncate text-grey-1"},[t.artist.musicSize?(e.openBlock(),e.createElementBlock("text",{key:0}," 歌曲："+e.toDisplayString(t.artist.musicSize),1)):e.createCommentVNode("v-if",!0),t.artist.albumSize?(e.openBlock(),e.createElementBlock("text",{key:1}," 专辑："+e.toDisplayString(t.artist.albumSize),1)):e.createCommentVNode("v-if",!0),t.artist.mvSize?(e.openBlock(),e.createElementBlock("text",{key:2}," 视频："+e.toDisplayString(t.artist.mvSize),1)):e.createCommentVNode("v-if",!0)])])])}}),Je=e.defineComponent({__name:"collectArtists",setup(t){const n=Ne(),l=e.ref(10),a=e.computed(()=>n.collectArtists.slice(0,l.value));return c(()=>{a.value.length<n.collectArtists.length&&(l.value+=10)}),(t,l)=>{const i=o(e.resolveDynamicComponent("Navbar"),h),r=o(e.resolveDynamicComponent("Subtitle"),le),s=o(e.resolveDynamicComponent("Artist"),Ue),c=o(e.resolveDynamicComponent("uni-swipe-action-item"),Fe),u=o(e.resolveDynamicComponent("uni-swipe-action"),Le),d=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(i,{title:"🎵 收藏歌手","left-arrow":""}),e.createVNode(r,{icon:"icon-more",class:"z-50 fixed left-0 right-0 bg-black-2 px-[28rpx] !my-0",style:e.normalizeStyle({top:44+("useStatusBarHeight"in t?t.useStatusBarHeight:e.unref(Pe))().value+"px"})},{title:e.withCtx(()=>[e.createElementVNode("view",{class:"w-[120rpx] h-[60rpx] leading-[60rpx] rounded-full bg-yellow-1 text-black-1 text-[34rpx] text-center"},e.toDisplayString(e.unref(n).collectArtists.length),1)]),_:1},8,["style"]),e.createElementVNode("view",{class:"bg-black-2 px-[28rpx] mt-[106rpx] after:block after:pb-[var(--save-bottom)]"},[e.createVNode(u,{class:"animate-enter-content"},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(o,l)=>(e.openBlock(),e.createBlock(c,{key:o.id,class:"animate-content","auto-close":!1},{right:e.withCtx(()=>[e.createElementVNode("view",{class:"bg-red-1 ml-1 w-[120rpx] h-[140rpx] leading-[140rpx] text-white-1 text-[30rpx] text-center",onClick:t=>e.unref(n).collectArtists.splice(l,1)}," 删除 ",8,["onClick"])]),default:e.withCtx(()=>[e.createVNode(s,{artist:o,onClick:n=>("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/artist/artist?id=${o.id}`)},null,8,["artist","onClick"])]),_:2},1024))),128))]),_:1})]),e.createVNode(d)],64)}}}),Oe=e.defineComponent({__name:"historyPlays",setup(t){const n=G(),l=Ne();return(t,a)=>{const i=o(e.resolveDynamicComponent("Navbar"),h),r=o(e.resolveDynamicComponent("JIcon"),Z),s=o(e.resolveDynamicComponent("Subtitle"),le),c=o(e.resolveDynamicComponent("Song"),ie),u=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(i,{title:"🎵 最近播放","left-arrow":""}),e.createVNode(s,{icon:"icon-menu","icon-size":"60rpx",class:"z-50 fixed left-0 right-0 bg-black-2 px-[28rpx] !my-0",style:e.normalizeStyle({top:44+("useStatusBarHeight"in t?t.useStatusBarHeight:e.unref(Pe))().value+"px"})},{title:e.withCtx(()=>[e.createElementVNode("view",{class:"flex items-center"},[e.createElementVNode("button",{class:"h-[64rpx] !leading-[64rpx] m-0 rounded-full bg-yellow-1 text-black-1",size:"mini",onClick:a[0]||(a[0]=t=>e.unref(n).onPlay("random"===e.unref(n).mode?e.unref(S)(0,e.unref(l).historyPlays.length):0,e.unref(l).historyPlays))},[e.createVNode(r,{class:"icon-play text-[42rpx]"})]),e.createElementVNode("text",{class:"text-grey-1 inline-block align-middle ml-5 font-[38rpx]"},e.toDisplayString(e.unref(l).historyPlays.length),1)])]),_:1},8,["style"]),e.createElementVNode("view",{class:"animate-enter-content bg-black-2 px-[28rpx] mt-[106rpx] after:block after:pb-[var(--save-bottom)]"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l).historyPlays,(t,o)=>{var a,i,r,s;return e.openBlock(),e.createBlock(c,{key:t.id,class:"animate-content",song:t,"is-play":(null==(a=e.unref(n).currentSongInfo)?void 0:a.song.id)===t.id&&e.unref(n).isPlay,"is-run":(null==(i=e.unref(n).currentSongInfo)?void 0:i.song.id)===t.id,"cannot-play":(null==(r=e.unref(n).currentSongInfo)?void 0:r.song.id)===t.id&&!(null==(s=e.unref(n).currentSongInfo)?void 0:s.urlInfo.url),onClick:t=>e.unref(n).onPlay(o,e.unref(l).historyPlays.slice())},null,8,["song","is-play","is-run","cannot-play","onClick"])}),128))]),e.createVNode(u)],64)}}}),qe=e.defineComponent({__name:"Cover",props:{playlist:null,image:null,description:null},setup(t){const l=t,a=Ne(),i=q(),r=e.ref(!!a.collectPlaylist.find(e=>e.id===l.playlist.id));function s(){if(n("log","at sharedPages/playlist/components/Cover/Cover.vue:44","onCollect"),r.value){const e=a.collectPlaylist.findIndex(e=>e.id===l.playlist.id);a.collectPlaylist.splice(e,1)}else a.collectPlaylist.unshift(l.playlist);r.value=!r.value}return(n,l)=>{var a;const c=o(e.resolveDynamicComponent("JImage"),Q),u=o(e.resolveDynamicComponent("JIcon"),Z);return e.openBlock(),e.createElementBlock("view",{class:"flex flex-col justify-between items-center mb-[20rpx]"},[e.createVNode(c,{src:t.image+"?param=300y300",width:"500rpx",height:"450rpx",radius:"20rpx"},null,8,["src"]),e.createElementVNode("view",{class:"mt-5 w-full flex justify-between items-center"},[t.description?(e.openBlock(),e.createElementBlock("view",{key:0,class:"flex-[0.95] line-clamp-6 text-[42rpx] font-bold text-white-1"},e.toDisplayString(t.description),1)):e.createCommentVNode("v-if",!0),(null==(a=e.unref(i).profile)?void 0:a.nickname)!==t.playlist.creator.nickname?(e.openBlock(),e.createBlock(u,{key:1,type:"icon-heart",size:"60rpx",class:e.normalizeClass(e.unref(r)?"text-red-1 animate-ping !repeat-1":"text-grey-1 transition-colors"),onClick:s},null,8,["class"])):e.createCommentVNode("v-if",!0)])])}}}),We=e.defineComponent({__name:"Creator",props:{userinfo:null},setup:t=>(n,l)=>{const a=o(e.resolveDynamicComponent("JImage"),Q);return e.openBlock(),e.createElementBlock("view",{class:"text-grey-1 mb-[20rpx]"},[e.createElementVNode("view",{class:"flex items-center mb-[20rpx]"},[e.createVNode(a,{src:t.userinfo.avatarUrl+"?param=70y70",width:"80rpx",height:"80rpx",radius:"50%"},null,8,["src"]),e.createElementVNode("text",{class:"ml-2"},e.toDisplayString(t.userinfo.nickname),1)]),e.createElementVNode("view",{class:"line-clamp-6"},e.toDisplayString(t.userinfo.signature),1)])}}),Xe=e.defineComponent({inheritAttrs:!1,__name:"playlist",setup(t){const l=G(),a=e.ref(""),i=e.shallowRef(),r=e.shallowReactive([]);return s(e=>{!async function(e){const{playlist:t}=await pe(e);n("log","at sharedPages/playlist/playlist.vue:118","🚀 ~ file: playlist.vue:59 ~ fetchPlaylist ~ playlist:",t),a.value=t.name,i.value=t,r.push(...t.tracks)}(Number(e.id))}),c(()=>{!i.value||r.length>=i.value.trackCount||async function(){if(!i.value)return;const e=r.length,t=i.value.trackIds.slice(e,e+20).reduce((e,t)=>e+(t.id+","),""),{songs:o=[]}=await function(e){return _.get(`/song/detail?ids=${e}`)}(t.slice(0,-1));n("log","at sharedPages/playlist/playlist.vue:111","🚀 ~ file: playlist.vue:129 ~ fetchSongs ~ newSongs:",o),r.push(...o)}()}),(t,n)=>{const s=o(e.resolveDynamicComponent("Navbar"),h),c=o(e.resolveDynamicComponent("JIcon"),Z),u=o(e.resolveDynamicComponent("Subtitle"),le),d=o(e.resolveDynamicComponent("Song"),ie),m=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(s,{title:e.unref(a),"left-arrow":""},null,8,["title"]),e.unref(i)?(e.openBlock(),e.createElementBlock("view",{key:0,class:"min-h-full px-[28rpx] bg-black-2 after:block after:pb-[var(--save-bottom)]"},[e.createVNode(qe,{playlist:e.unref(i),image:e.unref(i).coverImgUrl,description:e.unref(i).description},null,8,["playlist","image","description"]),e.createVNode(We,{userinfo:e.unref(i).creator},null,8,["userinfo"]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).tags,n=>(e.openBlock(),e.createElementBlock("button",{key:n,size:"mini",class:"font-bold bg-yellow-1 text-black-1 rounded-full mr-[20rpx]",onClick:o=>("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/searchSongs/searchSongs?keyword=${n}`)}," #"+e.toDisplayString(n),9,["onClick"]))),128)),e.createVNode(u,{icon:"icon-menu","icon-size":"60rpx",class:"z-50 sticky top-[44px] right-0 left-0 bg-black-2",style:e.normalizeStyle({top:44+("useStatusBarHeight"in t?t.useStatusBarHeight:e.unref(Pe))().value+"px"})},{title:e.withCtx(()=>[e.createElementVNode("view",{class:"flex items-center"},[e.createElementVNode("button",{class:"h-[64rpx] !leading-[64rpx] m-0 rounded-full bg-yellow-1 text-black-1",size:"mini",onClick:n[0]||(n[0]=t=>e.unref(l).onPlay("random"===e.unref(l).mode?e.unref(S)(0,e.unref(r).length):0,e.unref(r),e.unref(i)))},[e.createVNode(c,{class:"icon-play text-[42rpx]"})]),e.createElementVNode("text",{class:"text-grey-1 inline-block align-middle ml-5 font-[38rpx]"},e.toDisplayString(e.unref(i).trackCount),1)])]),_:1},8,["style"]),e.createElementVNode("view",{class:"animate-enter-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(t,n)=>{var o,a,s,c;return e.openBlock(),e.createBlock(d,{key:t.id,class:"animate-content",song:t,"is-play":(null==(o=e.unref(l).currentSongInfo)?void 0:o.song.id)===t.id&&e.unref(l).isPlay,"is-run":(null==(a=e.unref(l).currentSongInfo)?void 0:a.song.id)===t.id,"cannot-play":(null==(s=e.unref(l).currentSongInfo)?void 0:s.song.id)===t.id&&!(null==(c=e.unref(l).currentSongInfo)?void 0:c.urlInfo.url),onClick:t=>e.unref(l).onPlay(n,e.unref(r),e.unref(i))},null,8,["song","is-play","is-run","cannot-play","onClick"])}),128))])])):e.createCommentVNode("v-if",!0),e.createVNode(m)],64)}}});const Ge=e.defineComponent({__name:"AlbumInfo",props:{album:null},setup(t){const l=t,a=Ne(),i=e.ref(!!a.collectAlbums.find(e=>e.id===l.album.id));function r(){if(n("log","at sharedPages/album/components/AlbumInfo/AlbumInfo.vue:65","onCollect"),i.value){const e=a.collectAlbums.findIndex(e=>e.id===l.album.id);a.collectAlbums.splice(e,1)}else a.collectAlbums.unshift(l.album);i.value=!i.value}return(n,l)=>{const a=o(e.resolveDynamicComponent("JImage"),Q),s=o(e.resolveDynamicComponent("JIcon"),Z);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(a,{src:t.album.picUrl+"?param=300y300",width:"500rpx",height:"450rpx",radius:"20rpx",class:"m-auto mt-5"},null,8,["src"]),e.createElementVNode("view",{class:"pt-[40rpx]"},[e.createElementVNode("text",{class:"inline-block text-grey-1 text-[28rpx]"}," 更新于 "+e.toDisplayString(e.unref(V)(t.album.publishTime,"{y}-{m}-{d}")),1),e.createElementVNode("view",{class:"text-white-1 mb-[20rpx]"},[e.createElementVNode("view",{class:"flex justify-between items-center"},[e.createElementVNode("text",{class:"inline-block w-4/5 truncate text-[40rpx]"},e.toDisplayString(t.album.name),1),e.createVNode(s,{type:"icon-heart",size:"60rpx",class:e.normalizeClass(e.unref(i)?"text-red-1 animate-ping !repeat-1":"text-grey-1 transition-colors"),onClick:r},null,8,["class"])]),e.createElementVNode("view",{class:"flex items-center my-[20rpx]"},[e.createVNode(a,{src:t.album.artist.picUrl+"?param=70y70",width:"80rpx",height:"80rpx",radius:"50%"},null,8,["src"]),e.createElementVNode("text",{class:"ml-2 active:text-grey-1",onClick:l[0]||(l[0]=e.withModifiers(o=>("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))(`/sharedPages/artist/artist?id=${t.album.artist.id}`),["stop"]))},e.toDisplayString(t.album.artist.name),1)]),e.createElementVNode("text",{class:"line-clamp-6 text-[42rpx]"},e.toDisplayString(t.album.description),1),e.createElementVNode("view",{class:"mt-[20rpx] text-grey-2 text-[28rpx]"},[e.createElementVNode("text",{class:"mr-3"},"分享 "+e.toDisplayString(t.album.info.shareCount),1),e.createElementVNode("text",null,"喜欢 "+e.toDisplayString(t.album.info.likedCount),1)])])])],64)}}}),Ye=e.defineComponent({inheritAttrs:!1,__name:"album",setup(t){const l=Pe(),a=G(),i=e.shallowRef(),r=e.shallowReactive([]);return s(e=>{!async function(e){const{songs:t,album:o}=await function(e){return _.get(`/album?id=${e}`)}(e);n("log","at sharedPages/album/album.vue:82","🚀 ~ file: album.vue:17 ~ fetchAlbumDetail ~ album:",t,o),i.value=o,r.push(...t)}(e.id)}),(t,n)=>{var s;const c=o(e.resolveDynamicComponent("Navbar"),h),u=o(e.resolveDynamicComponent("JIcon"),Z),d=o(e.resolveDynamicComponent("Subtitle"),le),m=o(e.resolveDynamicComponent("Song"),ie),p=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(c,{title:(null==(s=e.unref(i))?void 0:s.name)||"","left-arrow":""},null,8,["title"]),e.unref(i)?(e.openBlock(),e.createElementBlock("view",{key:0,class:"px-[28rpx] after:block after:pb-[var(--save-bottom)]"},[e.createVNode(Ge,{album:e.unref(i)},null,8,["album"]),e.createVNode(d,{icon:"icon-menu","icon-size":"60rpx",class:"z-50 sticky top-[44px] right-0 left-0 bg-black-2",style:e.normalizeStyle({top:44+e.unref(l)+"px"})},{title:e.withCtx(()=>[e.createElementVNode("view",{class:"flex items-center"},[e.createElementVNode("button",{class:"h-[64rpx] !leading-[64rpx] m-0 rounded-full bg-yellow-1 text-black-1",size:"mini",onClick:n[0]||(n[0]=t=>e.unref(a).onPlay("random"===e.unref(a).mode?e.unref(S)(0,e.unref(r).length):0,e.unref(r)))},[e.createVNode(u,{class:"icon-play text-[40rpx]"})]),e.createElementVNode("text",{class:"text-grey-1 inline-block align-middle ml-5 font-[38rpx]"},e.toDisplayString(e.unref(r).length),1)])]),_:1},8,["style"]),e.createElementVNode("view",{class:"animate-enter-content"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(t,n)=>{var o,l,i,s;return e.openBlock(),e.createBlock(m,{key:t.id,class:"animate-content",song:t,"is-play":(null==(o=e.unref(a).currentSongInfo)?void 0:o.song.id)===t.id&&e.unref(a).isPlay,"is-run":(null==(l=e.unref(a).currentSongInfo)?void 0:l.song.id)===t.id,"cannot-play":(null==(i=e.unref(a).currentSongInfo)?void 0:i.song.id)===t.id&&!(null==(s=e.unref(a).currentSongInfo)?void 0:s.urlInfo.url),onClick:t=>e.unref(a).onPlay(n,e.unref(r))},null,8,["song","is-play","is-run","cannot-play","onClick"])}),128))])])):e.createCommentVNode("v-if",!0),e.createVNode(p)],64)}}});const Qe=e.defineComponent({__name:"ArtistInfo",props:{artist:null},setup(t){const l=t,a=Ne(),i=e.ref(!!a.collectArtists.find(e=>e.id===l.artist.id));function r(){if(n("log","at sharedPages/artist/components/ArtistInfo/ArtistInfo.vue:34","onCollect"),i.value){const e=a.collectArtists.findIndex(e=>e.id===l.artist.id);a.collectArtists.splice(e,1)}else a.collectArtists.unshift(l.artist);i.value=!i.value}return(n,l)=>{const a=o(e.resolveDynamicComponent("JImage"),Q),s=o(e.resolveDynamicComponent("JIcon"),Z);return e.openBlock(),e.createElementBlock("view",{class:"relative z-10 p-[30rpx] mt-[-50rpx] mx-[28rpx] rounded-[20rpx] bg-black-1 text-[38rpx] flex flex-col items-center space-y-2 font-bold text-white-1"},[e.createVNode(a,{src:t.artist.avatar+"?param=100y100",width:"140rpx",height:"140rpx",radius:"50%"},null,8,["src"]),e.createElementVNode("text",null,e.toDisplayString(t.artist.name),1),e.createElementVNode("text",{class:"line-clamp-6 text-grey-1 text-[34rpx]"},e.toDisplayString(t.artist.briefDesc),1),e.createVNode(s,{type:"icon-heart",size:"60rpx",class:e.normalizeClass(e.unref(i)?"text-red-1 animate-ping !repeat-1":"text-grey-1 transition-colors"),onClick:r},null,8,["class"])])}}}),Ze=e.defineComponent({__name:"ArtistSongs",props:{id:null,name:null,lazyLoad:{type:Boolean}},setup(t,{expose:l}){const a=t,i=G(),r=e.ref(!1),s=e.shallowReactive([]),c=e.shallowRef([]),u=e.watch(()=>a.lazyLoad,async e=>{e||r.value||(await async function(e){const{hotSongs:t}=await function(e){return _.get(`/artists?id=${e}`)}(e);n("log","at sharedPages/artist/components/ArtistSongs/ArtistSongs.vue:73","🚀 ~ file: artist.vue:117 ~ fetchArtistSongs ~ hotSongs:",t),c.value=t,d()}(a.id),r.value=!0,u())},{immediate:!0});function d(e=10){s.length!==c.value.length&&s.push(...c.value.slice(s.length,s.length+e))}return l({loadMore:d}),(n,l)=>{const a=o(e.resolveDynamicComponent("JIcon"),Z),u=o(e.resolveDynamicComponent("Subtitle"),le),d=o(e.resolveDynamicComponent("Song"),ie);return e.openBlock(),e.createElementBlock("view",{class:"animate-enter-content mt-[40rpx] mx-[28rpx] after:block after:pb-[var(--save-bottom)]"},[e.createVNode(u,{clickable:"",url:`/sharedPages/searchSongs/searchSongs?keyword=${t.name}`},{title:e.withCtx(()=>[e.createElementVNode("view",{class:"flex items-center"},[e.createElementVNode("button",{class:"h-[64rpx] !leading-[64rpx] m-0 rounded-full bg-yellow-1 text-black-1",size:"mini",onClick:l[0]||(l[0]=e.withModifiers(t=>e.unref(i).onPlay("random"===e.unref(i).mode?e.unref(S)(0,e.unref(s).length):0,e.unref(s)),["stop"]))},[e.createVNode(a,{class:"icon-play text-[42rpx]"})]),e.createElementVNode("text",{class:"text-grey-1 inline-block align-middle ml-5 font-[38rpx]"},e.toDisplayString(e.unref(c).length),1)])]),_:1},8,["url"]),e.unref(r)?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(s),(t,n)=>{var o,l,a,r;return e.openBlock(),e.createBlock(d,{key:t.id,class:"animate-content",song:t,"is-play":(null==(o=e.unref(i).currentSongInfo)?void 0:o.song.id)===t.id&&e.unref(i).isPlay,"is-run":(null==(l=e.unref(i).currentSongInfo)?void 0:l.song.id)===t.id,"cannot-play":(null==(a=e.unref(i).currentSongInfo)?void 0:a.song.id)===t.id&&!(null==(r=e.unref(i).currentSongInfo)?void 0:r.urlInfo.url),onClick:t=>e.unref(i).onPlay(n,e.unref(s))},null,8,["song","is-play","is-run","cannot-play","onClick"])}),128)):e.createCommentVNode("v-if",!0)])}}}),Ke=e.defineComponent({__name:"ArtistAlbums",props:{id:null,name:null,lazyLoad:{type:Boolean}},setup(t,{expose:l}){const a=t,i=e.ref(!1),r=e.shallowReactive([]),s=e.shallowRef([]),c=e.watch(()=>a.lazyLoad,async e=>{e||i.value||(await async function(e){const{hotAlbums:t}=await function(e){return _.get(`/artist/album?id=${e}`)}(e);n("log","at sharedPages/artist/components/ArtistAlbums/ArtistAlbums.vue:57","🚀 ~ file: ArtistAlbums.vue:21 ~ fetchArtistAlbums ~ hotAlbums:",t),s.value=t,u()}(a.id),i.value=!0,c())},{immediate:!0});function u(e=8){r.length!==s.value.length&&r.push(...s.value.slice(r.length,r.length+e))}return l({loadMore:u}),(n,l)=>{const a=o(e.resolveDynamicComponent("Subtitle"),le),c=o(e.resolveDynamicComponent("Album"),we);return e.openBlock(),e.createElementBlock("view",{class:"animate-enter-content mt-[40rpx] mx-[28rpx] after:block after:pb-[var(--save-bottom)]"},[e.createVNode(a,{clickable:"",url:`/sharedPages/searchAlbums/searchAlbums?keyword=${t.name}`},{title:e.withCtx(()=>[e.createElementVNode("view",{class:"w-[120rpx] h-[60rpx] leading-[60rpx] rounded-full bg-yellow-1 text-black-1 text-[34rpx] text-center"},e.toDisplayString(e.unref(s).length),1)]),_:1},8,["url"]),e.unref(i)?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(r),t=>(e.openBlock(),e.createBlock(c,{key:t.id,class:"animate-content",album:t,onClick:o=>("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))(`/sharedPages/album/album?id=${t.id}`)},null,8,["album","onClick"]))),128)):e.createCommentVNode("v-if",!0)])}}}),et=e.defineComponent({inheritAttrs:!1,__name:"artist",setup(t){const l=e.ref(),a=e.ref(0),i=e.shallowRef(),r=e.shallowRef(),u=e.shallowRef(),d=e.ref(!1);return c(()=>{d.value=!0}),s(e=>{!async function(e){const{data:t}=await function(e){return _.get(`/artist/detail?id=${e}`)}(e);n("log","at sharedPages/artist/artist.vue:122","🚀 ~ file: artist.vue:29 ~ fetchArtistDetail ~ data:",t),i.value=t.artist}(l.value=+e.id)}),(t,n)=>{var s,c,m,p;const f=o(e.resolveDynamicComponent("Navbar"),h),g=o(e.resolveDynamicComponent("JImage"),Q),y=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(f,{title:"🎵 "+((null==(s=e.unref(i))?void 0:s.name)||"MOO"),"left-arrow":""},null,8,["title"]),e.unref(i)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(g,{src:(null==(c=e.unref(i))?void 0:c.cover)+"?param=400y400",width:"100%",height:"550rpx",mode:"aspectFill"},null,8,["src"]),e.createVNode(Qe,{artist:e.unref(i)},null,8,["artist"]),e.createElementVNode("view",{class:"h-full mt-[40rpx]"},[e.createElementVNode("view",{class:"px-[28rpx] z-50 sticky top-0 left-0 right-0 flex justify-between items-center text-center bg-black-2",style:e.normalizeStyle({top:44+("useStatusBarHeight"in t?t.useStatusBarHeight:e.unref(Pe))().value+"px"})},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(["热门歌曲","热门专辑"],(t,n)=>e.createElementVNode("text",{key:t,class:e.normalizeClass(["flex-1 py-2 text-grey-1",{"text-white-1 [border-bottom:1px_solid] font-bold":e.unref(a)===n}]),onClick:e=>a.value=n},e.toDisplayString(t),11,["onClick"])),64))],4),e.createElementVNode("swiper",{class:"h-full",duration:400,current:e.unref(a),onChange:n[4]||(n[4]=({detail:{current:e}})=>{a.value=e})},[e.createElementVNode("swiper-item",{"skip-hidden-item-layout":""},[e.createElementVNode("scroll-view",{class:"h-full overscroll-none","scroll-y":e.unref(d),"upper-threshold":0,onScrolltoupper:n[0]||(n[0]=e=>d.value=!1),onScrolltolower:n[1]||(n[1]=t=>{var n;return null==(n=e.unref(r))?void 0:n.loadMore()})},[e.unref(l)?(e.openBlock(),e.createBlock(Ze,{key:0,id:e.unref(l),ref_key:"artistSongsRef",ref:r,name:(null==(m=e.unref(i))?void 0:m.name)||"","lazy-load":0!==e.unref(a)},null,8,["id","name","lazy-load"])):e.createCommentVNode("v-if",!0)],40,["scroll-y"])]),e.createElementVNode("swiper-item",{"skip-hidden-item-layout":""},[e.createElementVNode("scroll-view",{class:"h-full overscroll-none","scroll-y":e.unref(d),"upper-threshold":0,onScrolltoupper:n[2]||(n[2]=e=>d.value=!1),onScrolltolower:n[3]||(n[3]=t=>{var n;return null==(n=e.unref(u))?void 0:n.loadMore()})},[e.unref(l)?(e.openBlock(),e.createBlock(Ke,{key:0,id:e.unref(l),ref_key:"artistAlbumsRef",ref:u,name:(null==(p=e.unref(i))?void 0:p.name)||"","lazy-load":1!==e.unref(a)},null,8,["id","name","lazy-load"])):e.createCommentVNode("v-if",!0)],40,["scroll-y"])]),e.createCommentVNode(" <swiper-item skip-hidden-item-layout>MV</swiper-item> ")],40,["current"])])],64)):e.createCommentVNode("v-if",!0),e.createVNode(y)],64)}}}),tt=e.defineComponent({__name:"NavBack",emits:["back"],setup(t,{emit:n}){const l=Pe();function a(){n("back"),uni.navigateBack()}return(t,n)=>{const i=o(e.resolveDynamicComponent("JIcon"),Z);return e.openBlock(),e.createElementBlock("view",{class:"fixed left-0 z-10 flex items-center rotate-180",style:e.normalizeStyle({top:11+e.unref(l)+"px"}),onClick:a},[e.createVNode(i,{class:"icon-arrow text-white-1 p-2",size:"18px"})],4)}}}),nt=e.defineComponent({__name:"SongInfo",props:{tags:null,name:null,singers:null,song:null},emits:["menu"],setup(t){const l=t,a=Ne(),i=e.ref(!!a.collectSongs.find(e=>e.id===l.song.id));function r(){if(n("log","at sharedPages/play/components/SongInfo/SongInfo.vue:67","onCollect"),i.value){const e=a.collectSongs.findIndex(e=>e.id===l.song.id);a.collectSongs.splice(e,1)}else a.collectSongs.unshift(l.song);i.value=!i.value}return e.watch(()=>l.name,()=>{i.value=!!a.collectSongs.find(e=>e.id===l.song.id)}),(n,l)=>{const a=o(e.resolveDynamicComponent("JIcon"),Z);return e.openBlock(),e.createElementBlock("view",{class:"w-[80%] absolute left-[50%] bottom-[23%] translate-x-[-50%] translate-y-[-10%]"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.tags,t=>(e.openBlock(),e.createElementBlock("button",{key:t,size:"mini",class:"font-bold bg-yellow-1 text-black-1 rounded-full mr-[20rpx]",onClick:e.withModifiers(o=>("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))(`/sharedPages/searchSongs/searchSongs?keyword=${t}`),["stop"])}," #"+e.toDisplayString(t),9,["onClick"]))),128)),e.createElementVNode("view",{class:"flex flex-col justify-between mt-[20rpx] text-white-1 font-bold"},[e.createElementVNode("view",{class:"flex justify-between items-center mb-5"},[e.createElementVNode("view",{class:"flex-1 truncate text-[48rpx] mr-[20rpx]"},e.toDisplayString(t.name),1),e.createElementVNode("view",{onClick:e.withModifiers(r,["stop"])},[e.createVNode(a,{type:"icon-heart",size:"60rpx",class:e.normalizeClass(e.unref(i)?"text-red-1 animate-ping !repeat-1":"text-white-1 transition-colors")},null,8,["class"])],8,["onClick"])]),e.createElementVNode("view",{class:"flex justify-between items-center"},[e.createElementVNode("view",{class:"flex-1 truncate space-x-1 text-[38rpx] mr-[20rpx]"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.singers.slice(0,3),(t,o)=>(e.openBlock(),e.createElementBlock("text",{key:o,class:"active:text-grey-1",onClick:e.withModifiers(o=>("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))(`/sharedPages/artist/artist?id=${t.id}`),["stop"])},e.toDisplayString(t.name)+". ",9,["onClick"]))),128))]),e.createElementVNode("view",{onClick:l[0]||(l[0]=e.withModifiers(e=>n.$emit("menu"),["stop"]))},[e.createVNode(a,{class:"icon-menu text-[66rpx]"})])])])])}}}),ot=e.defineComponent({__name:"Lyric",props:{songId:null},setup(t){const o=t,l=G(),a=e.shallowRef("");let i=null;function r(e){const t=/\[(\d{2}:\d{2}\.\d{2,})\]([^[]+)/g,n=[];let o;for(;null!==(o=t.exec(e));){const[e,t]=o[1].split(":");n.push({time:60*Number(e)+Number(t),lyric:o[2]})}return n}async function s(){const{lrc:e,tlyric:t,needDesc:l}=await(i=o.songId,_.get(`/lyric?id=${i}`));var i;return n("log","at sharedPages/play/components/Lyric/Lyric.vue:81","🚀 ~ file: index.ts:76 ~ fetchLyric ~ tlyric:",t),n("log","at sharedPages/play/components/Lyric/Lyric.vue:82","🚀 ~ file: index.ts:76 ~ fetchLyric ~ lrc:",e),e.lyric?l?(a.value=r(e.lyric).map(({lyric:e})=>e).join(""),null):t&&t.lyric?[r(e.lyric),r(t.lyric)]:[r(e.lyric)]:(a.value="暂无歌词",null)}return e.watch(()=>o.songId,async e=>{n("log","at sharedPages/play/components/Lyric/Lyric.vue:25","🚀 ~ file: Lyric.vue:25 ~ watch ~ id:",e),i=await s()},{immediate:!0}),e.watch(()=>l.isSeeked,async e=>{e&&(i=await s())}),(t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"lyric w-[80%] max-h-[50%] mid top-[30%] text-center text-[50rpx] text-white-1 whitespace-pre-line line-clamp-6 [text-shadow:#0AFFD5_1rpx_0_10rpx]"},e.toDisplayString(function(e){if(!i)return a.value;const t=i.map(t=>function(e,t){if(e[0]&&!(e[0].time>t)){for(;e[1]&&e[1].time<t;)e.shift();return e.shift().lyric}}(t,e)).filter(Boolean);return t.length?a.value=t.join(""):a.value}(e.unref(l).currentTime)),1))}}),lt=e.defineComponent({__name:"PlaylistPopup",props:{song:null},emits:["change"],setup(t){const l=G();async function a(){n("log","at sharedPages/play/components/PlaylistPopup/PlaylistPopup.vue:66","onDownload",l.currentSongInfo)}return(n,i)=>{var r;const s=o(e.resolveDynamicComponent("JImage"),Q),c=o(e.resolveDynamicComponent("JIcon"),Z),u=o(e.resolveDynamicComponent("PlayQueue"),re);return e.openBlock(),e.createElementBlock("view",{class:"relative z-20 box-border w-full h-[80vh] rounded-b-2xl pt-[100rpx] px-[28rpx] backdrop-blur"},[e.createElementVNode("view",{class:"w-full pb-[50rpx]"},[e.createElementVNode("view",{class:"flex items-center"},[e.createVNode(s,{src:t.song.al.picUrl+"?param=200y200",width:"300rpx",height:"300rpx",radius:"12rpx",class:"flex-1"},null,8,["src"]),e.createElementVNode("view",{class:"flex-1 ml-[50rpx]"},[e.createElementVNode("view",{class:"text-white-1 line-clamp-3 text-[48rpx]"},e.toDisplayString(t.song.name),1),e.createElementVNode("view",{class:"flex-1 space-x-1 text-grey-1 line-clamp-2 text-[38rpx]"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.song.ar,(t,o)=>(e.openBlock(),e.createElementBlock("text",{key:o,class:"active:text-white-1",onClick:e.withModifiers(o=>("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))(`/sharedPages/artist/artist?id=${t.id}`),["stop"])},e.toDisplayString(t.name)+". ",9,["onClick"]))),128))])])]),e.createElementVNode("view",{class:"flex justify-between items-center text-white-1 pt-[30rpx]"},[e.createVNode(c,{class:"icon-send text-[60rpx]"}),e.createVNode(c,{class:"icon-download text-[60rpx]",onClick:a}),e.unref(l).playlist?(e.openBlock(),e.createBlock(c,{key:0,class:"icon-playlist text-[60rpx]",onClick:i[0]||(i[0]=t=>{var o;return("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))(`/sharedPages/playlist/playlist?id=${null==(o=e.unref(l).playlist)?void 0:o.id}`)})})):e.createCommentVNode("v-if",!0),(null==(r=e.unref(l).currentSongInfo)?void 0:r.song)?(e.openBlock(),e.createBlock(c,{key:1,class:"icon-album text-[60rpx]",onClick:i[1]||(i[1]=o=>("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))(`/sharedPages/album/album?id=${t.song.al.id}`))})):e.createCommentVNode("v-if",!0),e.createVNode(c,{class:"icon-message text-[60rpx]"})])]),e.createVNode(u,{class:"h-[calc(100%_-_446rpx)]",onChange:i[2]||(i[2]=e=>n.$emit("change"))})])}}}),at=d(e.defineComponent({__name:"PlayProgress",setup(t){const n=G(),o=e.ref(!1);function l({detail:{value:e}}){!o.value&&(o.value=!0),n.isPlay&&n.audio.pause(),n.currentTime=e/100*n.duration}function a({detail:{value:e}}){n.isSeeked=!0,o.value=!1,n.currentTime=e/100*n.duration,n.audio.seek(n.currentTime),n.audio.play(),setTimeout(()=>{n.isSeeked=!1},1e3)}return(t,i)=>(e.openBlock(),e.createElementBlock("slider",{value:e.unref(n).currentTime/e.unref(n).duration*100,step:.5,"active-color":"#fff","background-color":"rgba(255,255,255,.3)","block-color":"transparent","block-size":20,class:e.normalizeClass(["progress z-50 x-mid bottom-[18%] w-4/5 m-0 scale-y-[2.0] duration-300 transition-transform",{"!scale-y-[3.5] !duration-500 !rounded-full":e.unref(o)}]),onChanging:l,onChange:a},null,42,["value","step"]))}}),[["__scopeId","data-v-8ae7bff9"]]),it=e.defineComponent({__name:"play",setup(t){const n=G(),l=e.shallowRef(),a=e.ref(!1);function r(){var e,t;a.value=!0,null==(t=null==(e=l.value)?void 0:e.open)||t.call(e)}function s(){var e;null==(e=l.value)||e.close(),setTimeout(()=>{a.value=!1},333)}return i(()=>{
//! popup不关闭的话会导致跳转页面无法滚动
s()}),(t,i)=>{const c=o(e.resolveDynamicComponent("JImage"),Q),u=o(e.resolveDynamicComponent("JIcon"),Z),d=o(e.resolveDynamicComponent("uni-popup"),oe),m=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createCommentVNode(" ! ios平台滑动到后台时会穿透导致触发swiper滚动，所以添加一个占位伪元素 "),e.createElementVNode("view",{class:"w-full h-full relative before:w-full before:h-[var(--save-bottom)] before:absolute before:bottom-0 before:right-0 before:left-0 before:z-10"},[e.createVNode(tt),e.createVNode(Ve,{class:"w-full h-full",data:e.unref(n).songs,"current-data":e.unref(n).currentSongIndex,vertical:"",circular:"","skip-hidden-item-layout":"",duration:200,onClick:e.unref(n).toggle,onNext:e.unref(n).setNextSong,onPrevious:e.unref(n).setPreSong},{default:e.withCtx(({item:t})=>[e.createVNode(c,{class:"relative after:block after:absolute after:top-0 after:right-0 after:bottom-0 after:left-0 after:bg-[rgba(0,0,0,.22)]",src:t.al.picUrl+"?param=400y400",width:"100vw",height:"100vh"},null,8,["src"])]),current:e.withCtx(({item:t})=>{var o,l;return[e.createCommentVNode(" ! 微信小程序组件不会销毁，导致泄漏 "),e.createVNode(ot,{"song-id":t.id},null,8,["song-id"]),e.createVNode(nt,{tags:(null==(l=null==(o=e.unref(n))?void 0:o.playlist)?void 0:l.tags)||["热门","流行","另类"],name:t.name,singers:t.ar,song:t,onMenu:r},null,8,["tags","name","singers","song"])]}),_:1},8,["data","current-data","onClick","onNext","onPrevious"]),e.createVNode(at)]),e.createVNode(u,{class:e.normalizeClass([{hidden:e.unref(n).isPlay},"icon-audioPlay text-[100rpx] text-white-1 mid"]),onClick:e.unref(n).toggle},null,8,["class","onClick"]),e.createVNode(d,{ref_key:"popup",ref:l,type:"top",onMaskClick:s},{default:e.withCtx(()=>[e.createCommentVNode(' ! uni-popup的子组件在小程序端会立即创建并且不会销毁，而其余端会在"open"后创建"close"后销毁 '),e.unref(a)?(e.openBlock(),e.createBlock(lt,{key:0,song:e.unref(n).currentSongInfo.song},null,8,["song"])):e.createCommentVNode("v-if",!0)]),_:1},512),e.createVNode(m,{class:e.normalizeClass([{"opacity-0 pointer-events-none":e.unref(a)},"transition-opacity duration-300"])},null,8,["class"])],64)}}});function rt(e,t=1,n=0,o=30){return _.get(`/cloudsearch?keywords=${e}&offset=${n}&limit=${o}&type=${t}`)}const st=e.defineComponent({__name:"TopArtists",emits:["select"],setup(t){const l=e.shallowRef();return async function(){const{artists:e}=await function(e=0,t=30){return _.get(`/top/artists?offset=${e}&limit=${t}`)}();n("log","at sharedPages/search/components/TopArtists/TopArtists.vue:35","🚀 ~ file: Search.vue:46 ~ fetchTopArtists ~ artists:",e),l.value=e}(),(t,n)=>{const a=o(e.resolveDynamicComponent("JImage"),Q);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("view",{class:"my-[20rpx] py-[20rpx] text-[34rpx] font-bold text-white-1"},"热门歌手"),e.createElementVNode("view",{class:"flex flex-nowrap overflow-x-auto"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l),n=>(e.openBlock(),e.createElementBlock("view",{key:n.id,class:"mr-3",onClick:e=>t.$emit("select",n.name)},[e.createVNode(a,{src:n.picUrl+"?param=120y120",width:"120rpx",height:"120rpx",radius:"50%","lazy-load":""},null,8,["src"]),e.createElementVNode("text",{class:"inline-block text-center w-[120rpx] mt-1 text-grey-1 text-sm truncate"},e.toDisplayString(n.name),1)],8,["onClick"]))),128))])],64)}}}),ct=e.defineComponent({__name:"TopSearch",emits:["select"],setup(t){const o=e.shallowRef();return async function(){const{result:{hots:e}}=await _.get("/search/hot");n("log","at sharedPages/search/components/TopSearch/TopSearch.vue:27","🚀 ~ file: Search.vue:84 ~ fetchTopSearch ~ result:",e),o.value=e}(),(t,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("view",{class:"my-[20rpx] py-[20rpx] text-[34rpx] font-bold text-white-1"},"热门搜索"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o),n=>(e.openBlock(),e.createElementBlock("button",{key:n.first,size:"mini",class:"font-bold bg-yellow-1 text-black-1 rounded-full mr-[20rpx] mb-[20rpx]",onClick:e=>t.$emit("select",n.first)}," #"+e.toDisplayString(n.first),9,["onClick"]))),128))],64))}}),ut=e.defineComponent({__name:"SearchHistory",emits:["select"],setup(t){const n=Ne();return(t,o)=>e.unref(n).historySearch.length?(e.openBlock(),e.createElementBlock("view",{key:0},[e.createElementVNode("view",{class:"my-[20rpx] py-[20rpx] text-[34rpx] font-bold text-white-1"},"历史搜索"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n).historySearch,n=>(e.openBlock(),e.createElementBlock("button",{key:n,size:"mini",class:"font-bold bg-yellow-1 text-black-1 rounded-full mr-[20rpx] mb-[20rpx]",onClick:e=>t.$emit("select",n)}," #"+e.toDisplayString(n),9,["onClick"]))),128))])):e.createCommentVNode("v-if",!0)}}),dt=e.defineComponent({__name:"SearchResult",props:{suggests:null},emits:["update:suggests"],setup(t,{expose:l,emit:a}){const i=G(),r=Ne(),s=e.ref(""),c=e.shallowRef([]),u=e.shallowRef([]),d=e.shallowRef();function m(e){!async function(e){n("log","at sharedPages/search/components/SearchResult/SearchResult.vue:122","🚀 ~ file: SearchResult.vue:74 ~ fetchSongs ~ _keyword:",e);const{result:t}=await rt(e,1,0,6);n("log","at sharedPages/search/components/SearchResult/SearchResult.vue:124","🚀 ~ file: Search.vue:93 ~ fetchSongs ~ songs:",t.songs),c.value=t.songs}(e),async function(e){const{result:t}=await rt(e,100,0,10);n("log","at sharedPages/search/components/SearchResult/SearchResult.vue:136","🚀 ~ file: SearchResult.vue:68 ~ fetchArtist ~ artists:",t.artists),t.artists.length&&(d.value=t.artists.shift())}(e),async function(e){const{result:t}=await rt(e,10,0,2);n("log","at sharedPages/search/components/SearchResult/SearchResult.vue:130","🚀 ~ file: SearchResult.vue:109 ~ fetchAlbum ~ albums:",t.albums),u.value=t.albums}(e),r.addHistorySearch(e),a("update:suggests",[]),s.value=e}return e.onUnmounted(()=>{a("update:suggests",[])}),l({clear(){c.value=[],u.value=[],d.value=void 0,a("update:suggests",[])},onSelect:m}),(n,l)=>{const a=o(e.resolveDynamicComponent("Artist"),Ue),r=o(e.resolveDynamicComponent("Subtitle"),le),p=o(e.resolveDynamicComponent("Song"),ie),f=o(e.resolveDynamicComponent("Album"),we);return e.openBlock(),e.createElementBlock("view",{class:"bg-black-2 fixed bottom-0 right-0 left-0 px-[28rpx] overflow-y-auto after:block after:pb-[var(--save-bottom)]",style:e.normalizeStyle({top:`calc(44px + 94rpx + ${("useStatusBarHeight"in n?n.useStatusBarHeight:e.unref(Pe))().value}px)`})},[e.withDirectives(e.createVNode(ut,{onSelect:m},null,512),[[e.vShow,!t.suggests.length&&!e.unref(c).length]]),t.suggests.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(t.suggests,(t,n)=>(e.openBlock(),e.createElementBlock("view",{key:n,"hover-class":"bg-grey-1/10","hover-stay-time":50,class:"text-white-1 text-lg truncate py-1",onClick:e=>m(t.keyword)},e.toDisplayString(t.keyword),9,["onClick"]))),128)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.unref(d)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("view",{class:"mb-[20rpx] py-[20rpx] text-[34rpx] font-bold text-white-1"},"歌手"),e.createVNode(a,{artist:e.unref(d),onClick:l[0]||(l[0]=t=>("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))(`/sharedPages/artist/artist?id=${e.unref(d).id}`))},null,8,["artist"])],64)):e.createCommentVNode("v-if",!0),e.unref(c).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(r,{title:"歌曲",clickable:"",class:"mt-0",url:`/sharedPages/searchSongs/searchSongs?keyword=${e.unref(s)}`},null,8,["url"]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c),t=>{var n,o,l,a;return e.openBlock(),e.createBlock(p,{key:t.id,song:t,"is-play":(null==(n=e.unref(i).currentSongInfo)?void 0:n.song.id)===t.id&&e.unref(i).isPlay,"is-run":(null==(o=e.unref(i).currentSongInfo)?void 0:o.song.id)===t.id,"cannot-play":(null==(l=e.unref(i).currentSongInfo)?void 0:l.song.id)===t.id&&!(null==(a=e.unref(i).currentSongInfo)?void 0:a.urlInfo.url),onClick:e=>async function(e){await i.setCurrentSong(e,0);const t=await C(e.id);i.associationSong=e,i.songs=[e,...t]}(t)},null,8,["song","is-play","is-run","cannot-play","onClick"])}),128))],64)):e.createCommentVNode("v-if",!0),e.unref(u).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createVNode(r,{title:"专辑",clickable:"",class:"mt-0",url:`/sharedPages/searchAlbums/searchAlbums?keyword=${e.unref(s)}`},null,8,["url"]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),t=>(e.openBlock(),e.createBlock(f,{key:t.id,album:t,onClick:o=>("useNavigateTo"in n?n.useNavigateTo:e.unref(ae))(`/sharedPages/album/album?id=${t.id}`)},null,8,["album","onClick"]))),128))],64)):e.createCommentVNode("v-if",!0)],64))],4)}}}),mt=e.defineComponent({__name:"search",setup(t){const l=e.ref(""),a=e.shallowRef([]),i=e.ref(!1),r=e.shallowRef(),s=e.shallowRef();e.onMounted(()=>{r.value&&r.value.closeMask()});const c=[];function u(t){var n,o;i.value||(i.value=!0,null==(o=null==(n=r.value)?void 0:n.open)||o.call(n)),e.nextTick(()=>{var e;null==(e=s.value)||e.onSelect(t)})}function d(e){e&&(c.forEach(e=>{e.abort()}),u(e))}return e.watch(l,async(e,t)=>{try{if(e.length&&e.length>t.length&&e.trim()!==t.trim()){const{result:{allMatch:t}}=await(o=e,l={getRequestTask(e){var t;null==(t=c.pop())||t.abort(),c.push(e)}},_.get(`/search/suggest?keywords=${o}&type=mobile`,l));n("log","at sharedPages/search/search.vue:85","🚀 ~ file: Search.vue:102 ~ fetchSearchSuggest ~ allMatch:",t),t&&(a.value=t)}}catch(i){n("error","at sharedPages/search/search.vue:89",i.errMsg)}var o,l}),(t,n)=>{const c=o(e.resolveDynamicComponent("Navbar"),h),m=o(e.resolveDynamicComponent("JIcon"),Z),p=o(e.resolveDynamicComponent("JSearch"),de),f=o(e.resolveDynamicComponent("uni-popup"),oe),g=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(c,{title:"🎵 搜索","left-arrow":""}),e.createVNode(p,{modelValue:e.unref(l),"onUpdate:modelValue":n[0]||(n[0]=t=>e.isRef(l)?l.value=t:null),class:"mt-0 relative z-[999]","bg-color":"#010001",color:"#fce939",radius:"30rpx",placeholder:"搜索音乐 专辑 歌手 歌单 用户","cancel-button":e.unref(i),onClick:n[1]||(n[1]=t=>{var n,o;i.value=!0,null==(o=null==(n=e.unref(r))?void 0:n.open)||o.call(n)}),onCancel:n[2]||(n[2]=t=>{var n,o,l;null==(n=e.unref(s))||n.clear(),i.value=!1,null==(l=null==(o=e.unref(r))?void 0:o.close)||l.call(o)}),onClear:n[3]||(n[3]=t=>{var n;return null==(n=e.unref(s))?void 0:n.clear()}),onConfirm:d},{searchIcon:e.withCtx(()=>[e.createVNode(m,{class:"icon-search text-[60rpx] text-yellow-1"})]),_:1},8,["modelValue","cancel-button"]),e.createElementVNode("view",{class:"px-[28rpx]"},[e.createVNode(st,{onSelect:u}),e.createVNode(ct,{onSelect:u})]),e.createVNode(f,{ref_key:"popupRef",ref:r,type:"center","is-mask-click":!1},{default:e.withCtx(()=>[e.createVNode(dt,{ref_key:"searchResultRef",ref:s,suggests:e.unref(a),"onUpdate:suggests":n[4]||(n[4]=t=>e.isRef(a)?a.value=t:null)},null,8,["suggests"])]),_:1},512),e.createVNode(g)],64)}}}),pt=e.defineComponent({inheritAttrs:!1,__name:"searchSongs",setup(t){const l=G(),a=e.ref("搜索歌曲列表"),i=e.ref(""),r=e.shallowReactive([]),u=e.ref(0);async function d(e){const{result:t}=await rt(e,1,r.length,20);n("log","at sharedPages/searchSongs/searchSongs.vue:84","🚀 ~ file: Search.vue:93 ~ fetchSongs ~ songs:",t.songs,t.songCount),r.push(...t.songs),u.value=t.songCount}return s(e=>{a.value=i.value=e.keyword,n("log","at sharedPages/searchSongs/searchSongs.vue:72","🚀 ~ file: searchSongs.vue:9 ~ onLoad ~ keyword:",i.value),d(i.value)}),c(()=>{r.length>=u.value||d(i.value)}),(t,n)=>{const i=o(e.resolveDynamicComponent("Navbar"),h),s=o(e.resolveDynamicComponent("JIcon"),Z),c=o(e.resolveDynamicComponent("Subtitle"),le),d=o(e.resolveDynamicComponent("Song"),ie),m=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(i,{title:"🎵 "+e.unref(a),"left-arrow":""},null,8,["title"]),e.createVNode(c,{icon:"icon-menu","icon-size":"60rpx",class:"z-50 fixed left-0 right-0 bg-black-2 px-[28rpx] !my-0",style:e.normalizeStyle({top:44+("useStatusBarHeight"in t?t.useStatusBarHeight:e.unref(Pe))().value+"px"})},{title:e.withCtx(()=>[e.createElementVNode("view",{class:"flex items-center"},[e.createElementVNode("button",{class:"h-[64rpx] !leading-[64rpx] m-0 rounded-full bg-yellow-1 text-black-1",size:"mini",onClick:n[0]||(n[0]=t=>e.unref(l).onPlay("random"===e.unref(l).mode?e.unref(S)(0,e.unref(r).length):0,e.unref(r)))},[e.createVNode(s,{class:"icon-play text-[42rpx]"})]),e.createElementVNode("text",{class:"text-grey-1 inline-block align-middle ml-5 font-[38rpx]"},e.toDisplayString(e.unref(u)),1)])]),_:1},8,["style"]),e.createElementVNode("view",{class:"animate-enter-content bg-black-2 px-[28rpx] mt-[106rpx] after:block after:pb-[var(--save-bottom)]"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(t,n)=>{var o,a,i,s;return e.openBlock(),e.createBlock(d,{key:t.id,class:"animate-content",song:t,"is-play":(null==(o=e.unref(l).currentSongInfo)?void 0:o.song.id)===t.id&&e.unref(l).isPlay,"is-run":(null==(a=e.unref(l).currentSongInfo)?void 0:a.song.id)===t.id,"cannot-play":(null==(i=e.unref(l).currentSongInfo)?void 0:i.song.id)===t.id&&!(null==(s=e.unref(l).currentSongInfo)?void 0:s.urlInfo.url),onClick:t=>e.unref(l).onPlay(n,e.unref(r))},null,8,["song","is-play","is-run","cannot-play","onClick"])}),128))]),e.createVNode(m)],64)}}}),ft=e.defineComponent({inheritAttrs:!1,__name:"searchAlbums",setup(t){const l=e.ref("搜索专辑列表"),a=e.ref(""),i=e.shallowReactive([]);let r=0;async function u(e){const{result:t}=await rt(e,10,0,10);n("log","at sharedPages/searchAlbums/searchAlbums.vue:62","🚀 ~ file: SearchResult.vue:109 ~ fetchAlbum ~ albums:",t.albums,t.albumCount),i.push(...t.albums),r=t.albumCount}return s(e=>{l.value=a.value=e.keyword,n("log","at sharedPages/searchAlbums/searchAlbums.vue:50","🚀 ~ file: searchSongs.vue:9 ~ onLoad ~ keyword:",a.value),u(a.value)}),c(()=>{i.length>=r||u(a.value)}),(t,n)=>{const a=o(e.resolveDynamicComponent("Navbar"),h),r=o(e.resolveDynamicComponent("Album"),we),s=o(e.resolveDynamicComponent("PlayController"),ce);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(a,{title:"🎵 "+e.unref(l),"left-arrow":""},null,8,["title"]),e.createElementVNode("view",{class:"animate-enter-content box-border overflow-x-hidden px-[28rpx] after:block after:pb-[var(--save-bottom)]"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i),n=>(e.openBlock(),e.createElementBlock("view",{key:n.id,class:"animate-content"},[e.createElementVNode("text",{class:"inline-block text-grey-1 text-[30rpx] font-bold mb-2"}," 更新于 "+e.toDisplayString(e.unref(V)(n.publishTime,"{y}-{m}-{d}")),1),e.createVNode(r,{album:n,onClick:o=>("useNavigateTo"in t?t.useNavigateTo:e.unref(ae))(`/sharedPages/album/album?id=${n.id}`)},null,8,["album","onClick"])]))),128))]),e.createVNode(s)],64)}}});const ht=d({name:"UniNoticeBar",emits:["click","getmore","close"],props:{text:{type:String,default:""},moreText:{type:String,default:""},backgroundColor:{type:String,default:"#FFF9EA"},speed:{type:Number,default:100},color:{type:String,default:"#FF9A43"},fontSize:{type:Number,default:14},moreColor:{type:String,default:"#FF9A43"},single:{type:[Boolean,String],default:!1},scrollable:{type:[Boolean,String],default:!1},showIcon:{type:[Boolean,String],default:!1},showGetMore:{type:[Boolean,String],default:!1},showClose:{type:[Boolean,String],default:!1}},data:()=>({textWidth:0,boxWidth:0,wrapWidth:"",webviewHide:!1,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,elIdBox:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,show:!0,animationDuration:"none",animationPlayState:"paused",animationDelay:"0s"}),computed:{isShowGetMore(){return!0===this.showGetMore||"true"===this.showGetMore},isShowClose(){return!(!0!==this.showClose&&"true"!==this.showClose||!1!==this.showGetMore&&"false"!==this.showGetMore)}},mounted(){var e=getCurrentPages(),t=e[e.length-1].$getAppWebview();t.addEventListener("hide",()=>{this.webviewHide=!0}),t.addEventListener("show",()=>{this.webviewHide=!1}),this.$nextTick(()=>{this.initSize()})},methods:{initSize(){if(this.scrollable){let e=[],t=new Promise((e,t)=>{uni.createSelectorQuery().in(this).select(`#${this.elId}`).boundingClientRect().exec(t=>{this.textWidth=t[0].width,e()})}),n=new Promise((e,t)=>{uni.createSelectorQuery().in(this).select(`#${this.elIdBox}`).boundingClientRect().exec(t=>{this.boxWidth=t[0].width,e()})});e.push(t),e.push(n),Promise.all(e).then(()=>{this.animationDuration=this.textWidth/this.speed+"s",this.animationDelay=`-${this.boxWidth/this.speed}s`,setTimeout(()=>{this.animationPlayState="running"},1e3)})}},loopAnimation(){},clickMore(){this.$emit("getmore")},close(){this.show=!1,this.$emit("close")},onClick(){this.$emit("click")}}},[["render",function(t,n,l,a,i,r){const s=o(e.resolveDynamicComponent("uni-icons"),m);return i.show?(e.openBlock(),e.createElementBlock("view",{key:0,class:"uni-noticebar",style:e.normalizeStyle({backgroundColor:l.backgroundColor}),onClick:n[1]||(n[1]=(...e)=>r.onClick&&r.onClick(...e))},[!0===l.showIcon||"true"===l.showIcon?(e.openBlock(),e.createBlock(s,{key:0,class:"uni-noticebar-icon",type:"sound",color:l.color,size:1.5*l.fontSize},null,8,["color","size"])):e.createCommentVNode("v-if",!0),e.createElementVNode("view",{ref:"textBox",class:e.normalizeClass(["uni-noticebar__content-wrapper",{"uni-noticebar__content-wrapper--scrollable":l.scrollable,"uni-noticebar__content-wrapper--single":!l.scrollable&&(l.single||l.moreText)}]),style:e.normalizeStyle({height:l.scrollable?1.5*l.fontSize+"px":"auto"})},[e.createElementVNode("view",{id:i.elIdBox,class:e.normalizeClass(["uni-noticebar__content",{"uni-noticebar__content--scrollable":l.scrollable,"uni-noticebar__content--single":!l.scrollable&&(l.single||l.moreText)}])},[e.createElementVNode("text",{id:i.elId,ref:"animationEle",class:e.normalizeClass(["uni-noticebar__content-text",{"uni-noticebar__content-text--scrollable":l.scrollable,"uni-noticebar__content-text--single":!l.scrollable&&(l.single||l.showGetMore)}]),style:e.normalizeStyle({color:l.color,fontSize:l.fontSize+"px",lineHeight:1.5*l.fontSize+"px",width:i.wrapWidth+"px",animationDuration:i.animationDuration,"-webkit-animationDuration":i.animationDuration,animationPlayState:i.webviewHide?"paused":i.animationPlayState,"-webkit-animationPlayState":i.webviewHide?"paused":i.animationPlayState,animationDelay:i.animationDelay,"-webkit-animationDelay":i.animationDelay})},e.toDisplayString(l.text),15,["id"])],10,["id"])],6),r.isShowGetMore?(e.openBlock(),e.createElementBlock("view",{key:1,class:"uni-noticebar__more uni-cursor-point",onClick:n[0]||(n[0]=(...e)=>r.clickMore&&r.clickMore(...e))},[l.moreText.length>0?(e.openBlock(),e.createElementBlock("text",{key:0,style:e.normalizeStyle({color:l.moreColor,fontSize:l.fontSize+"px"})},e.toDisplayString(l.moreText),5)):(e.openBlock(),e.createBlock(s,{key:1,type:"right",color:l.moreColor,size:1.1*l.fontSize},null,8,["color","size"]))])):e.createCommentVNode("v-if",!0),r.isShowClose?(e.openBlock(),e.createElementBlock("view",{key:2,class:"uni-noticebar-close uni-cursor-point"},[e.createVNode(s,{type:"closeempty",color:l.color,size:1.1*l.fontSize,onClick:r.close},null,8,["color","size","onClick"])])):e.createCommentVNode("v-if",!0)],4)):e.createCommentVNode("v-if",!0)}],["__scopeId","data-v-3c80f609"]]);const gt=e.defineComponent({__name:"login",setup(t){const l=e.ref(""),a=e.ref(!1),i=e.ref(!1),r=e.ref(""),s=e.ref(!1);let c;async function u(){if(r.value.trim()){s.value=!0;try{await async function(e){var t,o;try{if(!e.includes("MUSIC_U")||!e.includes("__csrf"))throw new Error("Cookie格式不正确，需要包含MUSIC_U和__csrf字段");const l=null==(t=e.match(/MUSIC_U=([^;]+)/))?void 0:t[0],a=null==(o=e.match(/__csrf=([^;]+)/))?void 0:o[0];if(!l||!a)throw new Error("无法提取有效的MUSIC_U或__csrf字段");const i=`${l}; ${a};`;return uni.setStorage({key:"cookie",data:i,success:()=>{n("log","at utils/cookieHelper.ts:35","✅ Cookie已保存:",i)}}),await W(i),b.success("登录成功！"),uni.reLaunch({url:"/pages/index/index"}),!0}catch(l){return n("error","at utils/cookieHelper.ts:49","❌ 设置Cookie失败:",l),b.fail(`设置Cookie失败: ${l.message}`),!1}}(r.value.trim())&&c&&(clearInterval(c),c=void 0)}catch(e){n("error","at sharedPages/login/login.vue:131","手动登录失败:",e)}finally{s.value=!1}}else b.fail("请输入Cookie")}function d(){uni.showModal({title:"获取Cookie指南",content:"\n🔧 如何从浏览器获取网易云音乐Cookie：\n\n1. 打开浏览器，访问 https://music.163.com\n2. 登录您的网易云音乐账号\n3. 按F12打开开发者工具\n4. 切换到 Network(网络) 标签页\n5. 刷新页面或进行任何操作\n6. 找到任意一个请求，查看 Request Headers\n7. 复制 Cookie 字段的完整内容\n8. 粘贴到应用中使用\n\n⚠️ 注意：Cookie包含敏感信息，请妥善保管！\n  ",showCancel:!1,confirmText:"我知道了"})}function m(){!function(){const e="orpheuswidget://",t="com.netease.cloudmusic";if(!plus.runtime.isApplicationExist({action:e,pname:t}))return n("error","at sharedPages/login/login.vue:226","网易云音乐APP未安装"),void b.fail("请安装网易云音乐");function o(e){n("error","at sharedPages/login/login.vue:232","打开网易云音乐失败: "+e.message),b.fail("打开网易云音乐失败, 请自行启动")}"Android"===plus.os.name?plus.runtime.launchApplication({pname:t},o):"iOS"===plus.os.name&&plus.runtime.launchApplication({action:e},o)}()}return e.onBeforeUnmount(()=>{c&&clearInterval(c)}),async function(){a.value=!0;const{data:{unikey:e}}=await _.get(`/login/qr/key?timestamp=${Date.now()}`);n("log","at sharedPages/login/login.vue:153","🚀 ~ file: index.vue:73 ~ qr/key ~ :",e);const{data:{qrimg:t}}=await(o=e,_.get(`/login/qr/create?key=${o}&qrimg=true&timestamp=${Date.now()}`));var o;l.value=t,c=setInterval(async()=>{const{code:t,cookie:o}=await function(e){return _.get(`/login/qr/check?key=${e}&timestamp=${Date.now()}`)}(e);switch(n("log","at sharedPages/login/login.vue:159","🚀 ~ file: login.vue:54 ~ timer=setInterval ~ checkQRStatus:",{code:t,cookie:o}),t){case 800:b.fail("二维码已过期,请重新获取"),clearInterval(c),a.value=!1,l.value="";break;case 803:{clearInterval(c);const e=o.match(/MUSIC_U=?\w+\;/)[0]+" "+o.match(/__csrf=?\w+\;/)[0];n("log","at sharedPages/login/login.vue:174","🚀 ~ file: login.vue:80 ~ cookies:",e),W(o),uni.setStorage({key:"cookie",data:e}),uni.reLaunch({url:"/pages/index/index"});break}}},3e3)}(),(t,n)=>{const c=o(e.resolveDynamicComponent("Navbar"),h),p=o(e.resolveDynamicComponent("JImage"),Q),f=o(e.resolveDynamicComponent("uni-notice-bar"),ht);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(c,{title:"🎵 登录","left-arrow":""}),e.createElementVNode("view",{class:"z-50 mid"},[e.createCommentVNode(" 二维码登录区域 "),e.unref(i)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createCommentVNode(" 手动Cookie登录区域 "),e.createElementVNode("view",{class:"w-full px-8"},[e.createElementVNode("view",{class:"text-center mb-6"},[e.createElementVNode("text",{class:"text-lg font-bold"},"🍪 手动Cookie登录")]),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":n[1]||(n[1]=t=>e.isRef(r)?r.value=t:null),class:"w-full h-32 p-4 border border-gray-300 rounded-lg text-sm",placeholder:"请粘贴从浏览器获取的完整Cookie...",maxlength:2e3},null,512),[[e.vModelText,e.unref(r)]]),e.createElementVNode("view",{class:"flex gap-2 mt-4"},[e.createElementVNode("button",{class:"flex-1 font-bold bg-green-500 text-white rounded-full",loading:e.unref(s),onClick:u}," 确认登录 ",8,["loading"]),e.createElementVNode("button",{class:"flex-1 font-bold bg-gray-500 text-white rounded-full",onClick:n[2]||(n[2]=e=>i.value=!1)}," 返回扫码 ")]),e.createElementVNode("button",{class:"w-full font-bold bg-blue-500 text-white rounded-full mt-2 text-sm",onClick:d}," 如何获取Cookie？ "),e.createVNode(f,{class:"rounded-md overflow-hidden mt-4","show-icon":"",text:"Cookie包含敏感信息，请确保来源安全可靠"})])],2112)):(e.openBlock(),e.createElementBlock("view",{key:0},[e.createVNode(p,{src:e.unref(l),width:"400rpx",height:"400rpx"},null,8,["src"]),e.createElementVNode("button",{class:"font-bold bg-yellow-1 text-black-1 rounded-full my-4",loading:e.unref(a),onClick:e.withModifiers(m,["stop"])},e.toDisplayString(e.unref(l)?"打开网易云音乐":"获取二维码中..."),9,["loading","onClick"]),e.unref(l)?(e.openBlock(),e.createBlock(f,{key:0,class:"rounded-md overflow-hidden","show-icon":"",text:"请手动截图保存后,点击按钮跳转网易云音乐进行扫码（**小程序不支持跳转**）"})):e.createCommentVNode("v-if",!0),e.createCommentVNode(" 切换到手动登录 "),e.createElementVNode("button",{class:"font-bold bg-gray-500 text-white rounded-full mt-4 text-sm",onClick:n[0]||(n[0]=e=>i.value=!0)}," 手动输入Cookie登录 ")]))])],64)}}});__definePage("pages/index/index",Ee),__definePage("pages/index/neteasePlaylist/neteasePlaylist",De),__definePage("pages/index/songlist/songlist",Ie),__definePage("pages/index/albumList/albumList",ze),__definePage("pages/index/collectSongs/collectSongs",Me),__definePage("pages/index/collectPlaylist/collectPlaylist",je),__definePage("pages/index/collectAlbums/collectAlbums",He),__definePage("pages/index/collectArtists/collectArtists",Je),__definePage("pages/index/historyPlays/historyPlays",Oe),__definePage("sharedPages/playlist/playlist",Xe),__definePage("sharedPages/album/album",Ye),__definePage("sharedPages/artist/artist",et),__definePage("sharedPages/play/play",it),__definePage("sharedPages/search/search",mt),__definePage("sharedPages/searchSongs/searchSongs",pt),__definePage("sharedPages/searchAlbums/searchAlbums",ft),__definePage("sharedPages/login/login",gt);const yt=e.defineComponent({__name:"App",setup:e=>(r(async()=>{n("log","at App.vue:11","🚀 App Launch 开始"),uni.showToast({title:"🚀 App Launch 开始",icon:"none",duration:3e3}),n("log","at App.vue:20","🔧 当前环境:",{platform:uni.getSystemInfoSync().platform,environment:"production"});const e=uni.getSystemInfoSync();uni.showToast({title:`平台: ${e.platform}`,icon:"none",duration:2e3});try{n("log","at App.vue:35","🎯 开始执行 setupLogin"),uni.showToast({title:"🎯 开始执行 setupLogin",icon:"none",duration:2e3}),await W(),n("log","at App.vue:42","✅ setupLogin 执行成功"),uni.showToast({title:"✅ setupLogin 成功",icon:"success",duration:2e3})}catch(t){n("error","at App.vue:49","❌ setupLogin 异常:",t),uni.showToast({title:"❌ setupLogin 异常",icon:"none",duration:3e3})}try{n("log","at App.vue:59","🎯 开始执行 setupAudio"),uni.showToast({title:"🎯 开始执行 setupAudio",icon:"none",duration:2e3}),function(){const e=G(),{audio:t}=e;t.autoplay=!0,t.onCanplay(()=>{var o;e.isLoading=!1,e.duration=(null==(o=e.currentSongInfo)?void 0:o.urlInfo.time)/1e3,t.play(),n("log","at store/audio.ts:203","onCanplay.duration: ",e.duration)}),t.onPlay(()=>{n("log","at store/audio.ts:207","onPlay: "),e.isPlay=!0}),t.onPause(()=>{n("log","at store/audio.ts:212","onPause: "),e.isPlay=!1}),t.onEnded(()=>{n("log","at store/audio.ts:217","onEnded: "),e.setNextSong()}),t.onTimeUpdate(()=>{e.currentTime=t.currentTime}),t.onError(t=>{n("error","at store/audio.ts:226","❌ Audio error:",t),"undefined"!=typeof uni&&uni.showToast({title:"❌ 音频异常",icon:"none",duration:3e3}),b.fail("链接无效"),e.isLoading=!1,e.isPlay=!1}),t.onNext(()=>{n("log","at store/audio.ts:243","onNext: "),e.setNextSong()}),t.onPrev(()=>{n("log","at store/audio.ts:248","onPrev: "),e.setPreSong()})}(),n("log","at App.vue:66","✅ setupAudio 执行成功"),uni.showToast({title:"✅ setupAudio 成功",icon:"success",duration:2e3})}catch(t){n("error","at App.vue:73","❌ setupAudio 异常:",t),uni.showToast({title:"❌ setupAudio 异常",icon:"none",duration:3e3})}n("log","at App.vue:81","✅ App Launch 完成"),uni.showToast({title:"✅ App Launch 完成",icon:"success",duration:2e3})}),()=>{})});n("log","at main.ts:20","🚀 Main.ts 开始执行"),"undefined"!=typeof uni&&uni.showToast({title:"🚀 Main.ts 开始执行",icon:"none",duration:2e3}),"undefined"!=typeof window&&(window.addEventListener("unhandledrejection",e=>{n("error","at main.ts:34","❌ 未处理的Promise异常:",e.reason),n("error","at main.ts:35","❌ Promise:",e.promise),"undefined"!=typeof uni&&uni.showToast({title:"❌ Promise异常",icon:"none",duration:3e3}),e.preventDefault()}),window.addEventListener("error",e=>{n("error","at main.ts:49","❌ 全局JavaScript异常:",e.error),n("error","at main.ts:50","❌ 文件:",e.filename,"行号:",e.lineno),"undefined"!=typeof uni&&uni.showToast({title:"❌ JS异常",icon:"none",duration:3e3})}));const{app:vt,Vuex:xt,Pinia:kt}=function(){n("log","at main.ts:62","🚀 CreateApp 开始执行"),"undefined"!=typeof uni&&uni.showToast({title:"🚀 CreateApp 开始执行",icon:"none",duration:2e3});const t=e.createVueApp(yt),o=function(){const t=e.effectScope(!0),n=t.run(()=>e.ref({}));let o=[],l=[];const a=e.markRaw({install(e){P(a),a._a=e,e.provide(D,a),e.config.globalProperties.$pinia=a,l.forEach(e=>o.push(e)),l=[]},use(e){return this._a?o.push(e):l.push(e),this},_p:o,_a:null,_e:t,_s:new Map,state:n});return a}();return t.use(o),t.config.errorHandler=(e,t,o)=>{n("error","at main.ts:80","❌ Vue应用异常:",e),n("error","at main.ts:81","❌ 组件实例:",t),n("error","at main.ts:82","❌ 错误信息:",o),"undefined"!=typeof uni&&uni.showToast({title:"❌ Vue应用异常",icon:"none",duration:3e3})},n("log","at main.ts:93","✅ CreateApp 执行完成"),"undefined"!=typeof uni&&uni.showToast({title:"✅ CreateApp 执行完成",icon:"success",duration:2e3}),{app:t,pinia:o}}();uni.Vuex=xt,uni.Pinia=kt,vt.provide("__globalStyles",__uniConfig.styles),vt._component.mpType="app",vt._component.render=()=>{},vt.mount("#app")}(Vue,uni.VueShared);
